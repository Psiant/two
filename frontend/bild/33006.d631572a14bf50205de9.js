"use strict";
(window.webpackChunk = window.webpackChunk || []).push([[33006, 21561], {
    730185: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            modal: "a3eeef05a"
        }
    }
    ,
    990205: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a0afb7da0",
            title: "a64cafaa5",
            text: "a34ccaf40"
        }
    }
    ,
    494036: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "eda42ad0",
            title: "a5424459d",
            text: "a9fbbb570"
        }
    }
    ,
    73587: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a0daa7b26",
            icon: "a2b7706c6",
            title: "a4407a1ab"
        }
    }
    ,
    650040: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a6b57884e",
            title: "a7d7ff31e",
            tip: "a31d1ea3e",
            "tip-icon-wrapper": "a9f48aaaa",
            "tip-icon": "fb461036"
        }
    }
    ,
    862040: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            body: "a78fa16bc",
            text: "a79022247",
            "close-button": "a30f0a07e",
            "close-icon": "a176d9cc8",
            "trial-text": "a32f11c4",
            "trial-modal": "a1e4806dc",
            "trial-button": "cf60be3a",
            title: "b1782f04"
        }
    }
    ,
    336015: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            button: "a8b864092",
            loading: "d9e58d52",
            disable: "a3acb09fa",
            active: "a90eb90ea",
            preview: "a6c053be3"
        }
    }
    ,
    687083: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            answer: "a4b09b0c6",
            header: "a56745395",
            icon: "a05ad60fe",
            heading: "a78162dfa",
            main: "a05a9ce7e",
            text: "a05a34f96",
            "customersus-text": "a0e647c0f",
            close: "b09fa820",
            buttons: "a57116f79",
            "links-text": "f4f2a06e",
            resources: "a618f501d",
            links: "afa4c49e",
            link: "a05aa79fc"
        }
    }
    ,
    728822: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            button: "a920dad12",
            active: "a9772fd6a"
        }
    }
    ,
    604789: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            button: "a7c302fd7",
            preview: "a2f08207a",
            loading: "a0f83ed37",
            disable: "a5f112ee3",
            active: "a797d87ab"
        }
    }
    ,
    758918: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            control: "a013f64e3",
            header: "a398bda47",
            brand: "a1def16e6",
            active: "a2d8676c0",
            wrapper: "a27a18419",
            opened: "a461ac023",
            sticker: "a57dd08c3"
        }
    }
    ,
    275814: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a5dfddfac",
            text: "a763d8e14",
            button: "a18c1668a"
        }
    }
    ,
    84290: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            select: "a6e70a78a",
            option: "a7ada0098",
            "option-icon": "a62480ef2",
            "option-revert": "a0009fbc6",
            icon: "a7cdc7778"
        }
    }
    ,
    248813: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a6bc3f67c",
            title: "a63d3fa81",
            text: "a0a137838",
            "mb-16": "a636d1586"
        }
    }
    ,
    450518: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a0b67df12",
            title: "b935ded2",
            text: "a2701d9e4",
            input: "ba6773ee",
            options: "a61d4e11d"
        }
    }
    ,
    881323: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            wrapper: "a1f1ab15c",
            title: "a595bed61",
            text: "a4d347504",
            input: "a58c322d3"
        }
    }
    ,
    945948: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            modal: "a3a0ce3c9"
        }
    }
    ,
    294238: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            button: "a749a562a",
            icon: "a34d7f71c",
            close: "a66c7d5c2"
        }
    }
    ,
    993930: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            container: "a56315568",
            title: "a3102b6bf"
        }
    }
    ,
    659918: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            closeButton: "a65985964",
            content: "a0675127d",
            button: "a59ae78ae",
            wrapper: "a2cd76297",
            title: "a7779b15c",
            textAreaWrapper: "a875c1c46",
            textAreaWrapperError: "a0b5d922b",
            counter: "a06d53400",
            text: "a1ca0c5a9"
        }
    }
    ,
    989715: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            textAreaWrapper: "a9e21b06",
            textAreaWrapperError: "a487014ea",
            counter: "a0c6cd4a0",
            text: "a64042dee"
        }
    }
    ,
    642455: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            overlay: "a0f22b43f"
        }
    }
    ,
    849791: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            icon: "a2136a376",
            dot1: "a21348b05",
            dot2: "a21348b06",
            dot3: "a21348b07",
            load: "a21382be3"
        }
    }
    ,
    798409: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = {
            closeButton: "d976fe26"
        }
    }
    ,
    872828: (e, t, n) => {
        var r, a;
        n.r(t),
        n.d(t, {
            AiAgentActivationSteps: () => r,
            UserChoice: () => a
        }),
        function(e) {
            e.OFFER = "offer",
            e.CONFIRM = "confirm",
            e.SUCCESS = "success"
        }(r || (r = {})),
        function(e) {
            e.TURN_ON_FIRST_MODAL = "turn_on_first_modal",
            e.TURN_ON_SECOND_MODAL = "turn_on_second_modal",
            e.NOT_INTERESTED = "not_interested",
            e.CLOSE_FIRST_MODAL = "close_first_modal",
            e.CLOSE_SECOND_MODAL = "close_second_modal",
            e.REQUEST_TURN_ON = "request_turn_on",
            e.REQUEST_NOT_INTERESTED = "request_not_interested",
            e.REQUEST_CLOSE_MODAL = "request_close_modal"
        }(a || (a = {}))
    }
    ,
    201029: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => v
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(237262)
          , s = n(438089)
          , c = n(417438)
          , l = n(246541)
          , f = n(129624)
          , d = n(872828)
          , p = n(825650)
          , m = n(730185)
          , E = i().bind(m.default);
        const v = function(e) {
            var t = e.onCloseRequest
              , n = e.onSuccess
              , o = (0,
            f.default)().getSurveyData
              , i = (0,
            c.useInvalidateSurveyRequest)().invalidateSurveyRequest
              , m = d.AiAgentActivationSteps.OFFER
              , v = function(e) {
                n(o(e)),
                i()
            }
              , y = function() {
                t()
            }
              , h = function(e) {
                m = e
            }
              , b = function() {
                var e;
                m !== d.AiAgentActivationSteps.SUCCESS && (e = (0,
                u.isAdmin)() ? m === d.AiAgentActivationSteps.OFFER ? d.UserChoice.CLOSE_FIRST_MODAL : d.UserChoice.CLOSE_SECOND_MODAL : d.UserChoice.REQUEST_CLOSE_MODAL,
                v({
                    userChoice: e
                }))
            }
              , A = (0,
            s.default)((function() {
                return a().createElement(l.GlobalUnifiedModal, {
                    onClose: y,
                    size: "s",
                    customPosition: {
                        right: "40px",
                        bottom: "40px"
                    },
                    isPopup: !0,
                    isCloseButtonVisible: !0,
                    onCloseButtonClick: b,
                    slideDirection: "right",
                    className: E("modal"),
                    hideDistance: 600
                }, a().createElement(p.default, {
                    onStepChange: h,
                    onSuccess: v
                }))
            }
            ))
              , g = A.modalElement
              , S = A.showModal;
            return (0,
            r.useEffect)((function() {
                S()
            }
            ), []),
            g
        }
    }
    ,
    809764: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => h
        });
        var r = n(292554)
          , a = n.n(r)
          , o = n(916569)
          , i = n(529062)
          , u = n(701106)
          , s = n(880774)
          , c = n(369409)
          , l = n(417438)
          , f = n(872828)
          , d = n(990205)
          , p = n(827378)
          , m = a().bind(d.default)
          , E = (0,
        c.getCDNPath)("/frontend/images/interface/ai/")
          , v = APP.lang_id.toUpperCase()
          , y = {
            "1x": "".concat(E, "ai_agent_activation_popup_").concat(v, ".png"),
            "2x": "".concat(E, "ai_agent_activation_popup_").concat(v, "@2x.png")
        };
        const h = function(e) {
            var t = e.onCloseRequest
              , n = e.onSuccess;
            return p.createElement(l.BaseStep, {
                images: y
            }, p.createElement("div", {
                className: m("wrapper")
            }, p.createElement("div", null, p.createElement(u.default, {
                className: m("title"),
                type: "h2",
                size: "xxl"
            }, (0,
            s.i18n)("If you change your mind...")), p.createElement(o.Text, {
                theme: o.TextPrimaryTheme,
                className: m("text"),
                size: "l"
            }, (0,
            s.i18n)("You can activate the AI agent any time, take it for a test run, and customize its knowledge in the Kommo AI settings."))), p.createElement("div", null, p.createElement(i.Button, {
                theme: i.ButtonPrimaryTheme,
                onClick: function() {
                    n({
                        userChoice: f.UserChoice.NOT_INTERESTED
                    }),
                    t()
                }
            }, (0,
            s.i18n)("Got it")), p.createElement(i.Button, {
                theme: i.ButtonSecondaryTheme,
                onClick: function() {
                    n({
                        userChoice: f.UserChoice.TURN_ON_SECOND_MODAL
                    }),
                    APP.router.navigate("/settings/ai", {
                        trigger: !0
                    })
                }
            }, (0,
            s.i18n)("Go to settings")))))
        }
    }
    ,
    227318: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => w
        });
        var r = n(292554)
          , a = n.n(r)
          , o = n(916569)
          , i = n(529062)
          , u = n(701106)
          , s = n(880774)
          , c = n(369409)
          , l = n(237262)
          , f = n(960190)
          , d = n(292562)
          , p = n(613092)
          , m = n(417438)
          , E = n(436132)
          , v = n(872828)
          , y = n(494036)
          , h = n(827378)
          , b = a().bind(y.default)
          , A = (0,
        c.getCDNPath)("/frontend/images/interface/ai/")
          , g = APP.lang_id.toUpperCase()
          , S = {
            "1x": "".concat(A, "ai_agent_activation_popup_").concat(g, ".png"),
            "2x": "".concat(A, "ai_agent_activation_popup_").concat(g, "@2x.png")
        };
        const w = function(e) {
            var t = e.onSuccess
              , n = e.onCloseRequest
              , r = (0,
            p.useSteps)().changeStep
              , a = (0,
            l.isAdmin)() ? "Activate AI agent" : "Request admin to activate";
            return h.createElement(m.BaseStep, {
                images: S
            }, h.createElement("div", {
                className: b("wrapper")
            }, h.createElement("div", null, h.createElement(u.default, {
                className: b("title"),
                type: "h2",
                size: "xxl"
            }, (0,
            s.i18n)("Meet the AI agent")), h.createElement(o.Text, {
                theme: o.TextPrimaryTheme,
                className: b("text"),
                size: "l"
            }, (0,
            s.i18n)("Kommo’s new AI tool runs 24/7 on any communication channel to automatically assist clients, recommend products,  and lead them toward a purchase—saving you time and effort. Ready to give it a try?"))), h.createElement("div", null, h.createElement(i.Button, {
                theme: i.ButtonPrimaryTheme,
                onClick: function() {
                    (0,
                    l.isAdmin)() ? (t({
                        userChoice: v.UserChoice.TURN_ON_FIRST_MODAL
                    }),
                    APP.router.navigate("/settings/ai/".concat(E.ACTIVATE_AGENT_URL_HASH), {
                        trigger: !0
                    })) : (t({
                        userChoice: v.UserChoice.REQUEST_TURN_ON
                    }),
                    (0,
                    f.requestAiTrial)(d.TrialUserRequest.AGENT_REQUESTED),
                    r(v.AiAgentActivationSteps.SUCCESS))
                }
            }, (0,
            s.i18n)(a)), h.createElement(i.Button, {
                theme: i.ButtonSecondaryTheme,
                onClick: function() {
                    (0,
                    l.isAdmin)() ? r(v.AiAgentActivationSteps.CONFIRM) : (t({
                        userChoice: v.UserChoice.REQUEST_NOT_INTERESTED
                    }),
                    n())
                }
            }, (0,
            s.i18n)("I'm not interested")))))
        }
    }
    ,
    711480: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => m
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(916569)
          , s = n(701106)
          , c = n(491967)
          , l = n(880774)
          , f = n(970948)
          , d = n(73587)
          , p = i().bind(d.default);
        const m = function(e) {
            var t = e.onCloseRequest;
            return (0,
            r.useEffect)((function() {
                setTimeout((function() {
                    t()
                }
                ), 3e3)
            }
            ), []),
            a().createElement(f.default, null, a().createElement("div", {
                className: p("wrapper")
            }, a().createElement(c.default, {
                type: "svg",
                name: "settings--widgets--check",
                className: p("icon")
            }), a().createElement(s.default, {
                type: "h2",
                size: "xxl",
                className: p("title")
            }, (0,
            l.i18n)("Success (AI)")), a().createElement(u.Text, {
                theme: u.TextPrimaryTheme,
                size: "l"
            }, (0,
            l.i18n)("Request sent to administrators"))))
        }
    }
    ,
    598505: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => l
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(613092)
          , i = n(227318)
          , u = n(711480)
          , s = n(809764)
          , c = n(872828);
        const l = function(e) {
            var t = e.onClose
              , n = e.onStepChange
              , l = e.onSuccess
              , f = (0,
            o.useSteps)().activeStep;
            switch ((0,
            r.useEffect)((function() {
                n(f)
            }
            ), [f]),
            f) {
            case c.AiAgentActivationSteps.OFFER:
                return a().createElement(i.default, {
                    onSuccess: l,
                    onCloseRequest: t
                });
            case c.AiAgentActivationSteps.CONFIRM:
                return a().createElement(s.default, {
                    onSuccess: l,
                    onCloseRequest: t
                });
            case c.AiAgentActivationSteps.SUCCESS:
                return a().createElement(u.default, {
                    onCloseRequest: t
                })
            }
        }
    }
    ,
    825650: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => c
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(598505)
          , i = n(872828)
          , u = n(613092)
          , s = n(827378);
        const c = (0,
        u.withStepsProvider)((function(e) {
            var t = e.onSuccess
              , n = e.onStepChange
              , r = e.onClose
              , i = void 0 === r ? a().noop : r;
            return s.createElement(o.default, {
                onSuccess: t,
                onStepChange: n,
                onClose: i
            })
        }
        ), i.AiAgentActivationSteps.OFFER)
    }
    ,
    129624: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => u
        });
        var r = n(161320)
          , a = n.n(r)
          , o = n(827378)
          , i = n(417438);
        const u = function() {
            var e = (0,
            o.useRef)(a()());
            return {
                getSurveyData: function(t) {
                    var n = t.userChoice
                      , r = a()().diff(e.current, "seconds");
                    return {
                        name: i.Surveys.AI_AGENT_ACTIVATION,
                        data: {
                            userChoice: n
                        },
                        metadata: {
                            viewingTime: r,
                            viewingUrl: window.location.pathname
                        }
                    }
                }
            }
        }
    }
    ,
    559261: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => h
        });
        var r = n(827378)
          , a = n(292554)
          , o = n.n(a)
          , i = n(916569)
          , u = n(724329)
          , s = n(491967)
          , c = n(701106)
          , l = n(880774)
          , f = n(961790)
          , d = n(650040)
          , p = n(827378);
        function m(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function E(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function v(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return m(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? m(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        var y = o().bind(d.default);
        const h = function(e) {
            var t, n, a = e.talkIds, o = v((0,
            r.useState)(!1), 2), d = o[0], m = o[1], h = v((0,
            r.useState)(!1), 2), b = h[0], A = h[1], g = (0,
            r.useRef)(null), S = (0,
            f.default)({
                talkIds: a,
                onSuccessAiAgentDisable: function() {
                    m(!1),
                    A(!1)
                },
                onSuccessIsAiAgentEnabled: function() {
                    m(!0)
                }
            }), w = S.disableAiAgent, T = S.overlayElement, _ = (t = function() {
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(e) {
                    return w(),
                    [2]
                }
                ))
            }
            ,
            n = function() {
                var e = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = t.apply(e, n);
                    function i(e) {
                        E(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        E(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
            ,
            function() {
                return n.apply(this, arguments)
            }
            );
            return (0,
            u.useOnOutsideClick)({
                ref: g,
                handler: function() {
                    A(!1)
                }
            }),
            d ? p.createElement("div", {
                ref: g,
                className: y("wrapper")
            }, p.createElement(i.Text, {
                theme: i.TextSecondaryDarkTheme,
                size: "m",
                className: y("title"),
                onClick: function() {
                    A(!b)
                }
            }, (0,
            l.i18n)("AI_agent")), b && p.createElement("div", {
                className: y("tip")
            }, T, p.createElement(c.default, {
                type: "h2",
                size: "l"
            }, (0,
            l.i18n)("AI_agent")), p.createElement("div", {
                onClick: _,
                className: y("tip-icon-wrapper")
            }, p.createElement(s.default, {
                type: "svg",
                name: "salesbot--stop-bot-icon",
                className: y("tip-icon")
            })))) : null
        }
    }
    ,
    961790: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => d
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(724329)
          , i = n(960190)
          , u = n(393914);
        function s(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function c(e) {
            return function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function i(e) {
                        s(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        s(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
        }
        function l(e, t) {
            var n, r, a, o, i = {
                label: 0,
                sent: function() {
                    if (1 & a[0])
                        throw a[1];
                    return a[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: u(0),
                throw: u(1),
                return: u(2)
            },
            "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }
            ),
            o;
            function u(o) {
                return function(u) {
                    return function(o) {
                        if (n)
                            throw new TypeError("Generator is already executing.");
                        for (; i; )
                            try {
                                if (n = 1,
                                r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                0) : r.next) && !(a = a.call(r, o[1])).done)
                                    return a;
                                switch (r = 0,
                                a && (o = [2 & o[0], a.value]),
                                o[0]) {
                                case 0:
                                case 1:
                                    a = o;
                                    break;
                                case 4:
                                    return i.label++,
                                    {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    i.label++,
                                    r = o[1],
                                    o = [0];
                                    continue;
                                case 7:
                                    o = i.ops.pop(),
                                    i.trys.pop();
                                    continue;
                                default:
                                    if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        i = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                        i.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && i.label < a[1]) {
                                        i.label = a[1],
                                        a = o;
                                        break
                                    }
                                    if (a && i.label < a[2]) {
                                        i.label = a[2],
                                        i.ops.push(o);
                                        break
                                    }
                                    a[2] && i.ops.pop(),
                                    i.trys.pop();
                                    continue
                                }
                                o = t.call(e, i)
                            } catch (e) {
                                o = [6, e],
                                r = 0
                            } finally {
                                n = a = 0
                            }
                        if (5 & o[0])
                            throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, u])
                }
            }
        }
        var f = "canceled";
        const d = function(e) {
            var t, n = e.talkIds, r = e.onSuccessAiAgentDisable, s = e.onSuccessIsAiAgentEnabled, d = (0,
            u.default)(), p = d.showOverlay, m = d.hideOverlay, E = d.overlayElement, v = (t = c((function() {
                var e, t;
                return l(this, (function(o) {
                    switch (o.label) {
                    case 0:
                        return o.trys.push([0, 2, 3, 4]),
                        p(),
                        [4, (0,
                        i.disableAiAgent)({
                            talkIds: n
                        })];
                    case 1:
                        return (e = o.sent()).Embedded ? (a().every(e.Embedded.states, (function(e) {
                            return e.state.state === f
                        }
                        )) && r(),
                        [3, 4]) : [2];
                    case 2:
                        return t = o.sent(),
                        console.error(t),
                        [3, 4];
                    case 3:
                        return m(),
                        [7];
                    case 4:
                        return [2]
                    }
                }
                ))
            }
            )),
            function() {
                return t.apply(this, arguments)
            }
            ), y = function() {
                var e = c((function() {
                    var e, t, r;
                    return l(this, (function(o) {
                        switch (o.label) {
                        case 0:
                            return o.trys.push([0, 2, , 3]),
                            [4, (0,
                            i.getIsAiAgentEnabled)({
                                talkIds: n
                            })];
                        case 1:
                            return e = o.sent(),
                            t = e.Embedded.states,
                            a().isEmpty(t) || !a().some(t, (function(e) {
                                return e.state.state !== f
                            }
                            )) ? [2] : (s(),
                            [3, 3]);
                        case 2:
                            return r = o.sent(),
                            console.error(r),
                            [3, 3];
                        case 3:
                            return [2]
                        }
                    }
                    ))
                }
                ));
                return function() {
                    return e.apply(this, arguments)
                }
            }();
            return (0,
            o.useDeepCompareEffect)((function() {
                a().isEmpty(n) ? r() : y()
            }
            ), [n]),
            {
                overlayElement: E,
                disableAiAgent: v
            }
        }
    }
    ,
    99854: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => O
        });
        var r = n(292554)
          , a = n.n(r)
          , o = n(827378)
          , i = n(55188)
          , u = n.n(i)
          , s = n(529062)
          , c = n(916569)
          , l = n(701106)
          , f = n(886965)
          , d = n(880774)
          , p = n(225526)
          , m = n(292562)
          , E = n(635365)
          , v = n(954480)
          , y = n(889378)
          , h = n(604733)
          , b = n(862040)
          , A = n(827378);
        function g(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        var S, w = a().bind(b.default), T = (0,
        f.isTrial)(), _ = (0,
        f.isExpired)(), R = T || _, C = !0;
        const O = function(e) {
            var t, n, r = e.onCloseRequest, a = void 0 === r ? u().noop : r, i = e.error, f = (0,
            E.useModalProvider)().ModalProvider, b = (0,
            v.useSupportChatMessage)(), T = b.sendMessageAndGoToSupportChat, _ = b.isLoading, O = function() {
                a()
            }, I = function() {
                C = !1,
                S = setTimeout((function() {
                    C = !0
                }
                ), 1e4)
            }, N = (t = function() {
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(e) {
                    return R ? (APP.router.navigate("/settings/pay/", {
                        trigger: !0
                    }),
                    a(),
                    [2]) : (a(),
                    (new y.default).showSuccess((0,
                    d.i18n)("Feedback received!"), null, 500),
                    setTimeout((function() {
                        return T((0,
                        d.i18n)("Hi! I have reached the limit for AI requests. Could you please increase my limit?"), {
                            isNeedToSendMessage: C,
                            onSuccess: I
                        })
                    }
                    ), 500),
                    [2])
                }
                ))
            }
            ,
            n = function() {
                var e = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = t.apply(e, n);
                    function i(e) {
                        g(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        g(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
            ,
            function() {
                return n.apply(this, arguments)
            }
            );
            if ((0,
            o.useEffect)((function() {
                return function() {
                    clearTimeout(S)
                }
            }
            ), []),
            !i)
                return null;
            var k = i.code
              , x = void 0 === k ? "" : k
              , P = i.detail
              , L = void 0 === P ? "" : P
              , U = x === m.RewriterErrorCodes.PAYMENT_REQUIRED;
            return A.createElement(f, {
                onCloseRequest: O,
                bodyClassName: w("body"),
                bodyInnerClassName: w("wrapper")
            }, U ? R ? A.createElement("div", {
                className: w("trial-modal")
            }, A.createElement(l.default, {
                type: "h2",
                size: "xl",
                weight: "normal",
                className: w("title")
            }, (0,
            d.i18n)("You’ve reached your AI limit for the Kommo trial.")), A.createElement(p.CloseModalButton, {
                onClick: O,
                className: w("close-button")
            }), A.createElement(c.Text, {
                size: "l",
                theme: c.TextPrimaryTheme,
                className: w("trial-text")
            }, (0,
            d.i18n)("To continue using Kommo AI, please subscribe to a paid plan.")), A.createElement(s.Button, {
                theme: s.ButtonPrimaryTheme,
                onClick: N,
                className: w("trial-button")
            }, (0,
            d.i18n)("Go to Billing"))) : A.createElement(h.AiUsageSurvey, {
                onCloseRequest: O,
                onSubmit: N,
                isLoading: _
            }) : A.createElement("div", {
                className: "modal-body__caption head_2 modal-body__caption-error"
            }, L))
        }
    }
    ,
    524176: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => R
        });
        var r = n(267651)
          , a = n.n(r)
          , o = n(827378)
          , i = n(55188)
          , u = n.n(i)
          , s = n(770086)
          , c = n(564638)
          , l = n(500034)
          , f = n(720923)
          , d = n(436132)
          , p = n(117464)
          , m = n(174246)
          , E = n(355582)
          , v = n(30893)
          , y = n(827378);
        function h(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function b(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function A(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        function g(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return h(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? h(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        var S = [d.AiHelperType.TASK, d.AiHelperType.ANSWER]
          , w = function(e) {
            return u().indexOf(S, e)
        }
          , T = (0,
        l.isFeatureAvailable)("ai_agent_viewable") || (0,
        l.isFeatureAvailable)("kommo_ai_trial_started") && !(0,
        l.isFeatureAvailable)("kommo_ai_trial_ended")
          , _ = (0,
        l.isFeatureAvailable)("is_ai_task_suggestion_enabled");
        const R = (0,
        f.default)((function(e) {
            var t = e.getText
              , n = e.onLoad
              , r = e.setText
              , i = e.shouldAiAnswerShow
              , f = e.shouldAiTaskShow
              , h = e.messageId
              , S = void 0 === h ? "" : h
              , R = e.talkId
              , C = e.text
              , O = e.answerType
              , I = void 0 === O ? d.AnswerType.DEFAULT : O
              , N = e.elementType
              , k = e.elementId
              , x = e.setHelperHeight
              , P = e.el
              , L = e.onAnswerReply
              , U = e.onHelperVisibilityChange
              , D = e.checkIsTaskExists
              , M = g((0,
            o.useState)(S), 2)
              , H = M[0]
              , F = M[1]
              , B = g((0,
            o.useState)(R), 2)
              , G = B[0]
              , j = B[1]
              , q = g((0,
            o.useState)(i), 2)
              , W = q[0]
              , Y = q[1]
              , z = g((0,
            o.useState)(f), 2)
              , K = z[0]
              , V = z[1]
              , Q = g((0,
            o.useState)({
                isOpened: !1,
                text: ""
            }), 2)
              , $ = Q[0]
              , Z = Q[1]
              , X = (0,
            o.useRef)(!1)
              , J = (0,
            o.useRef)(!1)
              , ee = (0,
            o.useRef)(null)
              , te = (0,
            o.useRef)(null)
              , ne = (0,
            o.useRef)(null)
              , re = (0,
            o.useRef)(null)
              , ae = function(e, t) {
                var n = t.talkId
                  , r = t.messageId;
                n !== R || re.current || J.current || (Y(!0),
                !D() && T && _ && V(!0),
                F(r),
                j(n))
            }
              , oe = function(e, t) {
                t.style.visibility = e ? "hidden" : "visible"
            }
              , ie = function() {
                var e = P.getBoundingClientRect().width;
                if (te.current) {
                    var t = te.current
                      , n = t.hiddenAnswerElRef
                      , r = t.openedAnswerElRef
                      , a = n.current ? n.current : r.current;
                    if (a && ee.current) {
                        var o = a.getBoundingClientRect().width
                          , i = ee.current.getBoundingClientRect().width;
                        oe(e < o + i, ee.current)
                    }
                }
            }
              , ue = u().throttle((function() {
                ie()
            }
            ), c.WINDOW_RESIZE_THROTTLE_DELAY);
            (0,
            o.useEffect)((function() {
                var e = a().subscribe(d.AI_ANSWER_MESSAGE_ADD, ae)
                  , t = a().subscribe(d.AI_HELPER_RESIZE, ue);
                return window.addEventListener("resize", ue),
                function() {
                    a().unsubscribe(e),
                    a().unsubscribe(t),
                    window.removeEventListener("resize", ue),
                    x(d.NULL_HELPER_HEIGHT)
                }
            }
            ), []);
            var se, ce, le = function(e) {
                J.current = e,
                X.current = e
            }, fe = (se = function(e) {
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(t) {
                    return re.current = null,
                    [2, new Promise((function(t) {
                        setTimeout((function() {
                            U(!1),
                            t(!0)
                        }
                        ), d.SHOW_HIDE_ANIMATION_DURATION_MS),
                        e === d.AiHelperType.ANSWER && le(!1)
                    }
                    ))]
                }
                ))
            }
            ,
            ce = function() {
                var e = this
                  , t = arguments;
                return new Promise((function(n, r) {
                    var a = se.apply(e, t);
                    function o(e) {
                        b(a, n, r, o, i, "next", e)
                    }
                    function i(e) {
                        b(a, n, r, o, i, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
            ,
            function(e) {
                return ce.apply(this, arguments)
            }
            ), de = function(e) {
                var t = e.helperType
                  , n = e.cb
                  , r = e.isLoading
                  , a = function() {
                    re.current = t,
                    U(!0),
                    n()
                };
                re.current ? w(t) > w(re.current) && !r && (re.current === d.AiHelperType.TASK && ne.current && oe(!0, ne.current),
                re.current = null,
                a()) : a()
            }, pe = function(e) {
                var t = e.helperType
                  , n = e.errorMessage;
                re.current && re.current !== t || x(d.NULL_HELPER_HEIGHT),
                n && Z({
                    isOpened: !0,
                    text: n
                })
            };
            return y.createElement(y.Fragment, null, y.createElement(s.default, {
                isOpened: $.isOpened,
                onCloseRequest: function() {
                    return Z((function(e) {
                        return t = function(e) {
                            for (var t = 1; t < arguments.length; t++) {
                                var n = null != arguments[t] ? arguments[t] : {}
                                  , r = Object.keys(n);
                                "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter((function(e) {
                                    return Object.getOwnPropertyDescriptor(n, e).enumerable
                                }
                                )))),
                                r.forEach((function(t) {
                                    A(e, t, n[t])
                                }
                                ))
                            }
                            return e
                        }({}, e),
                        n = null != (n = {
                            isOpened: !1
                        }) ? n : {},
                        Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : function(e, t) {
                            var n = Object.keys(e);
                            if (Object.getOwnPropertySymbols) {
                                var r = Object.getOwnPropertySymbols(e);
                                n.push.apply(n, r)
                            }
                            return n
                        }(Object(n)).forEach((function(e) {
                            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e))
                        }
                        )),
                        t;
                        var t, n
                    }
                    )),
                    !0
                },
                isTryAgainAvailable: !1
            }, $.text), W && y.createElement(m.default, {
                elementId: k,
                elementType: N,
                type: (0,
                p.getUpdatedAnswerType)(I),
                onAnswerReply: L,
                onLoad: n,
                onShow: function() {
                    ie(),
                    le(!0),
                    J.current = !1
                },
                onHide: fe,
                onError: pe,
                onProcess: function(e) {
                    J.current = e
                },
                setText: r,
                getText: t,
                setHelperHeight: x,
                messageId: H,
                talkId: G,
                text: C,
                ref: te,
                shouldSuggestionShow: !(0,
                l.isFeatureAvailable)("ai_answer"),
                onTryToShow: de
            }), K && y.createElement(v.default, {
                ref: ne,
                messageId: H,
                talkId: G,
                onHide: fe,
                elementId: k,
                elementType: N,
                setHelperHeight: x,
                onTryToShow: de,
                onError: pe
            }), y.createElement(E.default, {
                onAnswerReply: L,
                onLoad: n,
                onShow: function() {
                    ie()
                },
                getText: t,
                setText: r,
                setHelperHeight: x,
                ref: ee
            }))
        }
        ))
    }
    ,
    174246: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => j
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(55188)
          , i = n.n(o)
          , u = n(292554)
          , s = n.n(u)
          , c = n(267651)
          , l = n.n(c)
          , f = n(161320)
          , d = n.n(f)
          , p = n(672034)
          , m = n(880774)
          , E = n(237262)
          , v = n(500034)
          , y = n(960190)
          , h = n(292562)
          , b = n(321561)
          , A = n(117464)
          , g = n(195601)
          , S = n(587776)
          , w = n(436132)
          , T = n(874559)
          , _ = n(805556)
          , R = n(719929)
          , C = n(336015);
        function O(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function I(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function N(e) {
            return function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function i(e) {
                        I(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        I(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
        }
        function k(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return O(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? O(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function x(e, t) {
            var n, r, a, o, i = {
                label: 0,
                sent: function() {
                    if (1 & a[0])
                        throw a[1];
                    return a[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: u(0),
                throw: u(1),
                return: u(2)
            },
            "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }
            ),
            o;
            function u(o) {
                return function(u) {
                    return function(o) {
                        if (n)
                            throw new TypeError("Generator is already executing.");
                        for (; i; )
                            try {
                                if (n = 1,
                                r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                0) : r.next) && !(a = a.call(r, o[1])).done)
                                    return a;
                                switch (r = 0,
                                a && (o = [2 & o[0], a.value]),
                                o[0]) {
                                case 0:
                                case 1:
                                    a = o;
                                    break;
                                case 4:
                                    return i.label++,
                                    {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    i.label++,
                                    r = o[1],
                                    o = [0];
                                    continue;
                                case 7:
                                    o = i.ops.pop(),
                                    i.trys.pop();
                                    continue;
                                default:
                                    if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        i = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                        i.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && i.label < a[1]) {
                                        i.label = a[1],
                                        a = o;
                                        break
                                    }
                                    if (a && i.label < a[2]) {
                                        i.label = a[2],
                                        i.ops.push(o);
                                        break
                                    }
                                    a[2] && i.ops.pop(),
                                    i.trys.pop();
                                    continue
                                }
                                o = t.call(e, i)
                            } catch (e) {
                                o = [6, e],
                                r = 0
                            } finally {
                                n = a = 0
                            }
                        if (5 & o[0])
                            throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, u])
                }
            }
        }
        var P = s().bind(C.default)
          , L = {
            answer: "",
            answerId: null,
            usedReferences: []
        }
          , U = ["isAiUserOnboardingCompleted", "isAiAccountOnboardingCompleted"]
          , D = "startAnswerTimeMetric"
          , M = "showAnswerTimeMetric"
          , H = (0,
        v.isFeatureAvailable)("ai_rewriter_fast_reply")
          , F = (0,
        v.isFeatureAvailable)("is_customization_for_global")
          , B = (0,
        E.isAdmin)()
          , G = (0,
        r.forwardRef)((function(e, t) {
            var n = e.messageId
              , o = e.elementId
              , u = e.elementType
              , s = e.talkId
              , c = e.text
              , f = e.type
              , v = e.setHelperHeight
              , C = e.setText
              , O = e.getText
              , I = e.onShow
              , G = e.onHide
              , j = e.onProcess
              , q = e.shouldSuggestionShow
              , W = e.onTryToShow
              , Y = e.onError
              , z = k((0,
            r.useState)(!1), 2)
              , K = z[0]
              , V = z[1]
              , Q = k((0,
            r.useState)(!1), 2)
              , $ = Q[0]
              , Z = Q[1]
              , X = k((0,
            r.useState)(!1), 2)
              , J = X[0]
              , ee = X[1]
              , te = ""
              , ne = (0,
            r.useRef)(L)
              , re = (0,
            r.useRef)(L)
              , ae = (0,
            r.useRef)([])
              , oe = (0,
            r.useRef)(null)
              , ie = (0,
            r.useRef)(null)
              , ue = (0,
            r.useRef)(!1)
              , se = (0,
            r.useRef)({
                show: i().noop,
                hide: i().noop
            })
              , ce = (0,
            r.useRef)(f)
              , le = function() {
                ne.current = L,
                re.current = L,
                ae.current = [],
                ue.current = !1
            };
            (0,
            r.useImperativeHandle)(t, (function() {
                return {
                    openedAnswerElRef: oe,
                    hiddenAnswerElRef: ie
                }
            }
            ));
            var fe, de = function() {
                V(!1),
                v(w.BASE_HELPER_HEIGHT)
            }, pe = function() {
                V(!0);
                var e = ne.current.answerId;
                e && !ue.current && (ue.current = !0,
                H || (0,
                y.markAnswer)({
                    answerId: e,
                    data: {
                        status: h.AnswerUsingStatuses.OPEN_ANSWER
                    }
                }))
            }, me = (0,
            b.default)({
                acceptText: B ? (0,
                m.i18n)("Go to settings (AI)") : (0,
                m.i18n)("Close"),
                declineText: (0,
                m.i18n)("Cancel"),
                title: (0,
                m.i18n)("Unable to find relevant source to respond"),
                description: [{
                    text: B ? (0,
                    m.i18n)("We couldn't find a relevant source to respond to this message. Please add a new source or update the existing ones to proceed.") : (0,
                    m.i18n)("Please ask your admin to add a new source or update the existing ones.")
                }],
                onAccept: function() {
                    B && APP.router.navigate("/settings/ai/".concat(w.SHOW_SOURCES_MODAL_URL_HASH), {
                        trigger: !0
                    })
                },
                shouldPreventPageChange: !1,
                isNoCancel: !B
            }).openConfirmModal, Ee = (0,
            T.default)({
                type: ce.current,
                onSuccess: function(e) {
                    var t = e.answer
                      , n = e.answerId
                      , r = e.usedReferences;
                    ne.current = {
                        answer: t,
                        answerId: n,
                        usedReferences: r.slice(0, 2)
                    },
                    W({
                        helperType: w.AiHelperType.ANSWER,
                        cb: se.current.show
                    }),
                    performance.measure(M, D);
                    var a = d().duration(performance.getEntriesByName(M)[0].duration).asSeconds();
                    (0,
                    y.markAnswer)({
                        answerId: n,
                        data: {
                            status: h.AnswerUsingStatuses.SHOW_ANSWER,
                            showAnswerTime: a
                        }
                    }),
                    (H || ce.current === w.AnswerType.GENERATE || ce.current === w.AnswerType.GENERATE_BY_HELPER) && pe()
                },
                onError: (fe = N((function(e) {
                    var t, n, r;
                    return x(this, (function(a) {
                        switch (a.label) {
                        case 0:
                            if (t = e.answer_id,
                            n = e.error_reason,
                            ne.current = {
                                answer: "",
                                answerId: t,
                                usedReferences: []
                            },
                            j(!1),
                            r = {
                                helperType: w.AiHelperType.ANSWER
                            },
                            ce.current === w.AnswerType.GENERATE) {
                                if (n === _.AnswerErrorReasons.EMPTY_ARTICLES)
                                    return me(),
                                    [2];
                                r.errorMessage = (0,
                                m.i18n)("Unable to generate your response. Please try again.")
                            }
                            return [4, se.current.hide()];
                        case 1:
                            return a.sent(),
                            Y(r),
                            [2]
                        }
                    }
                    ))
                }
                )),
                function(e) {
                    return fe.apply(this, arguments)
                }
                ),
                onMutate: function() {
                    j(!0)
                }
            }), ve = Ee.postAnswer, ye = Ee.toggleRefetching, he = Ee.isLoading, be = function() {
                Z(!0),
                v(w.BASE_HELPER_HEIGHT),
                I()
            }, Ae = function() {
                var e = N((function() {
                    return x(this, (function(e) {
                        switch (e.label) {
                        case 0:
                            return Z(!1),
                            V(!1),
                            v(w.BASE_HELPER_HEIGHT),
                            ye(!1),
                            $ ? [4, G(w.AiHelperType.ANSWER)] : [3, 2];
                        case 1:
                            e.sent(),
                            ce.current === w.AnswerType.GENERATE && (ce.current = (0,
                            A.getUpdatedAnswerType)(w.AnswerType.DEFAULT)),
                            e.label = 2;
                        case 2:
                            return [2]
                        }
                    }
                    ))
                }
                ));
                return function() {
                    return e.apply(this, arguments)
                }
            }();
            se.current = {
                show: be,
                hide: Ae
            };
            var ge = function(e, t) {
                if (t) {
                    var n = t.event
                      , r = t.talkId;
                    switch (n) {
                    case _.AiAnswerCloseEvents.CLOSE:
                    case _.AiAnswerCloseEvents.READ:
                        r !== s || H || Ae();
                        break;
                    case _.AiAnswerCloseEvents.SOCKET_EXTERNAL:
                        break;
                    default:
                        Ae()
                    }
                }
            }
              , Se = function() {
                var e, t = O(), n = ne.current.answerId, r = re.current, a = r.answer, o = r.answerId;
                switch (!0) {
                case a && t === a:
                    e = {
                        status: h.AnswerUsingStatuses.SEND_ANSWER
                    };
                    break;
                case a && t !== a:
                    e = {
                        status: h.AnswerUsingStatuses.EDIT_ANSWER,
                        userText: t
                    };
                    break;
                case Boolean(n):
                    e = {
                        status: h.AnswerUsingStatuses.SKIP_ANSWER,
                        userText: t
                    }
                }
                var i = o || n;
                ae.current.length && (e.checkedReferences = ae.current),
                e && i && ((0,
                y.markAnswer)({
                    answerId: i,
                    data: e
                }),
                a && le())
            };
            (0,
            r.useEffect)((function() {
                var e = l().subscribe(w.FEED_COMPOSE_SUBMIT, Se)
                  , t = l().subscribe(w.AI_ANSWER_CLOSE, ge);
                return function() {
                    l().unsubscribe(t),
                    l().unsubscribe(e),
                    performance.clearMeasures(M),
                    performance.clearMarks(D)
                }
            }
            ), []);
            var we = function() {
                var e = N((function() {
                    var e, t, n, r;
                    return x(this, (function(a) {
                        switch (a.label) {
                        case 0:
                            return a.trys.push([0, 2, , 3]),
                            [4, (0,
                            p.getFeaturesByQuery)({
                                queries: U,
                                shouldCamelCase: !0
                            })];
                        case 1:
                            return e = a.sent().features,
                            t = e.isAiUserOnboardingCompleted,
                            n = e.isAiAccountOnboardingCompleted,
                            t || n || !(0,
                            E.isAdmin)() || (ee(!0),
                            W({
                                helperType: w.AiHelperType.ANSWER,
                                cb: be
                            })),
                            [3, 3];
                        case 2:
                            return r = a.sent(),
                            console.error(r),
                            [3, 3];
                        case 3:
                            return [2]
                        }
                    }
                    ))
                }
                ));
                return function() {
                    return e.apply(this, arguments)
                }
            }();
            (0,
            r.useEffect)((function() {
                if (ce.current === w.AnswerType.DEFAULT)
                    switch (!0) {
                    case F && q:
                        we();
                        break;
                    case !F && q:
                        break;
                    default:
                        performance.mark(D),
                        ve({
                            lastMessageId: n,
                            talkId: s,
                            entityId: o,
                            entityType: u
                        })
                    }
                ce.current !== w.AnswerType.GENERATE_BY_HELPER || ne.current.answer || W({
                    helperType: w.AiHelperType.ANSWER,
                    cb: be
                })
            }
            ), [n]),
            (0,
            r.useEffect)((function() {
                f === w.AnswerType.GENERATE && c && (performance.mark(D),
                ve({
                    text: c,
                    talkId: s,
                    entityId: o,
                    entityType: u
                })),
                f === w.AnswerType.GENERATE_BY_HELPER && (performance.mark(D),
                W({
                    helperType: w.AiHelperType.ANSWER,
                    cb: be
                }))
            }
            ), [f]),
            (0,
            r.useEffect)((function() {
                K && oe.current && v("".concat(w.MAX_OPENED_ANSWER_HEIGHT + w.BASE_BOTTOM_HELPERS_OFFSET, "px"))
            }
            ), [K]);
            var Te = function() {
                var e = N((function(e) {
                    return x(this, (function(t) {
                        switch (t.label) {
                        case 0:
                            return C({
                                text: e,
                                isAnswer: !0
                            }),
                            re.current = ne.current,
                            ne.current = L,
                            [4, Ae()];
                        case 1:
                            return t.sent(),
                            ae.current = [],
                            ue.current = !1,
                            [2]
                        }
                    }
                    ))
                }
                ));
                return function(t) {
                    return e.apply(this, arguments)
                }
            }()
              , _e = function() {
                var e = N((function() {
                    var e;
                    return x(this, (function(t) {
                        switch (t.label) {
                        case 0:
                            return J && (0,
                            y.setAnswerOnboarding)(),
                            (e = ne.current.answerId) && (0,
                            y.markAnswer)({
                                answerId: e,
                                data: {
                                    status: h.AnswerUsingStatuses.CLOSE_ANSWER
                                }
                            }),
                            [4, Ae()];
                        case 1:
                            return t.sent(),
                            le(),
                            [2]
                        }
                    }
                    ))
                }
                ));
                return function() {
                    return e.apply(this, arguments)
                }
            }();
            switch ((0,
            r.useEffect)((function() {
                he ? W({
                    helperType: w.AiHelperType.ANSWER,
                    cb: be,
                    isLoading: he
                }) : ne.current.answer || ce.current === w.AnswerType.GENERATE_BY_HELPER || Ae()
            }
            ), [he]),
            !0) {
            case q && F:
                te = (0,
                m.i18n)("Reply faster by training the AI assistant using data from your information sources");
                break;
            case he && !ne.current.answer:
                te = a().createElement(g.default, null);
                break;
            case ce.current === w.AnswerType.GENERATE_BY_HELPER && !ne.current.answer:
                te = (0,
                m.i18n)("Generate response");
                break;
            default:
                te = ne.current.answer
            }
            return K ? a().createElement(R.default, {
                isOpen: K,
                answerRef: ne,
                ref: oe,
                onLinkMouseDown: function(e) {
                    if (!i().contains(ae.current, e)) {
                        var t = ne.current.answerId;
                        ae.current.push(e),
                        (0,
                        y.markAnswer)({
                            answerId: t,
                            data: {
                                status: h.AnswerUsingStatuses.SHOW_ANSWER,
                                checkedReferences: ae.current
                            }
                        })
                    }
                },
                onApplyClick: Te,
                onCloseClick: function(e) {
                    e.stopPropagation(),
                    de()
                },
                onOutsideClick: function() {
                    H || de()
                }
            }) : a().createElement(S.default, {
                ref: ie,
                className: P("button", {
                    active: $,
                    disable: he
                }),
                onClick: function(e) {
                    if (e.stopPropagation(),
                    ce.current === w.AnswerType.GENERATE_BY_HELPER)
                        ve({
                            lastMessageId: n,
                            talkId: s,
                            entityId: o,
                            entityType: u
                        });
                    else {
                        if (J)
                            return (0,
                            y.setAnswerOnboarding)(),
                            APP.router.navigate("/settings/ai/".concat(w.SHOW_FIRST_SOURCE_MODAL_URL_HASH), {
                                trigger: !0
                            }),
                            void Ae();
                        pe()
                    }
                },
                isClosable: !0,
                onCloseClick: _e
            }, a().createElement("div", {
                className: P("preview", {
                    loading: he
                })
            }, te))
        }
        ));
        G.displayName = "AiAnswer";
        const j = G
    }
    ,
    719929: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => S
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(55188)
          , i = n.n(o)
          , u = n(292554)
          , s = n.n(u)
          , c = n(916569)
          , l = n(352467)
          , f = n(529062)
          , d = n(724329)
          , p = n(500034)
          , m = n(880774)
          , E = n(436132)
          , v = n(706898)
          , y = n(740098)
          , h = n(687083)
          , b = (0,
        p.isFeatureAvailable)("ai_rewriter_fast_reply")
          , A = s().bind(h.default)
          , g = (0,
        r.forwardRef)((function(e, t) {
            var n = e.isOpen
              , o = e.answerRef
              , u = e.onApplyClick
              , s = e.onLinkMouseDown
              , p = e.onCloseClick
              , h = e.onOutsideClick
              , g = (0,
            r.useRef)(null)
              , S = (0,
            r.useRef)([])
              , w = (0,
            r.useRef)(null)
              , T = (0,
            r.useRef)(null);
            return (0,
            r.useLayoutEffect)((function() {
                if (n && S.current.length > 1) {
                    var e, t = null === (e = g.current) || void 0 === e ? void 0 : e.offsetWidth, r = S.current[0];
                    t && r && r.offsetWidth > t / 2 && (r.style.maxWidth = "50%")
                }
            }
            ), [n]),
            (0,
            r.useLayoutEffect)((function() {
                if (n) {
                    var e = w.current
                      , t = T.current;
                    e && t && (e.style.width = "calc(100% - ".concat(t.offsetWidth + 24, "px)"))
                }
            }
            ), [n]),
            (0,
            r.useLayoutEffect)((function() {
                var e = t.current;
                if (n && e && w.current) {
                    var r = w.current
                      , a = new ResizeObserver((function(e) {
                        e.forEach((function(e) {
                            r.style.display = e.contentRect.width < 350 ? "none" : "flex"
                        }
                        ))
                    }
                    ));
                    return a.observe(e),
                    function() {
                        e && a.unobserve(e)
                    }
                }
            }
            ), [n]),
            (0,
            d.useOnOutsideClick)({
                ref: t,
                handler: h
            }),
            a().createElement("div", {
                className: A("answer"),
                ref: t,
                onClick: function(e) {
                    var t, n = e.target;
                    n === T.current || (null === (t = T.current) || void 0 === t ? void 0 : t.contains(n)) || e.stopPropagation()
                }
            }, a().createElement("div", {
                className: A("header")
            }, a().createElement(v.default, {
                className: A("icon")
            }), a().createElement("p", {
                className: A("heading")
            }, (0,
            m.i18n)("Suggested reply"))), a().createElement("div", {
                className: A("main")
            }, a().createElement("div", {
                className: A("text", {
                    "customersus-text": b
                })
            }, a().createElement("div", {
                dangerouslySetInnerHTML: {
                    __html: o.current.answer.replace(/\n/g, "<br />")
                }
            })), a().createElement("div", {
                className: A("buttons")
            }, a().createElement(f.Button, {
                theme: f.ButtonNeutralTheme,
                onClick: function() {
                    var e = o.current.answer;
                    PubSub.publish(E.AI_COMPOSE_ANSWER_PASTED, e),
                    u(e)
                },
                ref: T
            }, (0,
            m.i18n)("Add as a draft")), o.current.usedReferences.length > 0 && a().createElement("div", {
                className: A("resources"),
                ref: w
            }, a().createElement(c.Text, {
                theme: c.TextSecondaryLightTheme,
                className: A("links-text"),
                size: "m"
            }, (0,
            m.i18n)("Based on:"), " "), a().createElement("div", {
                className: A("links"),
                ref: g
            }, i().map(o.current.usedReferences, (function(e, t) {
                return a().createElement(r.Fragment, {
                    key: t
                }, a().createElement(l.Link, {
                    theme: l.LinkPrimaryTheme,
                    className: A("link"),
                    href: e,
                    target: "_blank",
                    rel: "noreferrer",
                    onMouseDown: function() {
                        s(e)
                    },
                    ref: function(e) {
                        S.current[t] = e
                    },
                    title: e
                }, e), o.current.usedReferences.length > 1 && t < o.current.usedReferences.length - 1 && a().createElement(a().Fragment, null, ", "))
            }
            )))))), a().createElement("div", {
                onClick: p,
                className: A("close")
            }, a().createElement(y.default, null)))
        }
        ));
        g.displayName = "Content";
        const S = g
    }
    ,
    874559: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => p
        });
        var r = n(456552)
          , a = n(827378)
          , o = n(292562)
          , i = n(960190)
          , u = n(604874)
          , s = n(746716)
          , c = n(942407)
          , l = n(436132);
        function f(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function d(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return f(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? f(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        const p = function(e) {
            var t = e.type
              , n = void 0 === t ? l.AnswerType.DEFAULT : t
              , f = e.onSuccess
              , p = e.onError
              , m = e.onMutate
              , E = d((0,
            a.useState)(null), 2)
              , v = E[0]
              , y = E[1]
              , h = d((0,
            a.useState)(!1), 2)
              , b = h[0]
              , A = h[1]
              , g = d((0,
            a.useState)(!1), 2)
              , S = g[0]
              , w = g[1]
              , T = (0,
            c.default)()
              , _ = T.requestCount
              , R = T.incrementRequestCount
              , C = T.clearRequestCount
              , O = function(e) {
                var t = e.detail
                  , n = e.code;
                p(e),
                y({
                    detail: t,
                    code: n
                })
            }
              , I = function(e) {
                f(e),
                y(null),
                w(!1)
            }
              , N = (0,
            r.useMutation)({
                mutationFn: function(e) {
                    switch (m(),
                    n) {
                    case l.AnswerType.GENERATE:
                        return (0,
                        s.postGenerateAnswerRequest)(e);
                    case l.AnswerType.DEFAULT:
                    default:
                        return (0,
                        i.postAnswerRequest)(e)
                    }
                },
                onSuccess: function(e) {
                    var t = e.answer
                      , r = e.status
                      , a = e.answerId
                      , i = e.usedReferences;
                    r !== o.RewriteStatusRequest.LOADING && n !== l.AnswerType.GENERATE || w(!0),
                    t && r === o.RewriteStatusRequest.SUCCESS && a ? I({
                        answer: t,
                        answerId: a,
                        usedReferences: i
                    }) : A(!0)
                },
                onError: O,
                onMutate: function() {
                    n === l.AnswerType.GENERATE_BY_HELPER && w(!0)
                }
            })
              , k = N.mutate
              , x = N.data
              , P = N.isLoading;
            return (0,
            r.useQuery)({
                queryKey: ["answer", null == x ? void 0 : x.jobUuid],
                queryFn: function() {
                    return (0,
                    i.getRewriterRequest)({
                        jobUuid: null == x ? void 0 : x.jobUuid,
                        maxRequestCount: 20,
                        url: u.ANSWER_URL,
                        incrementRequestCount: R,
                        clearRequestCount: C,
                        requestCount: _.current
                    })
                },
                enabled: b,
                refetchInterval: l.REFETCH_ANSWER_INTERVAL,
                onSuccess: function(e) {
                    var t = e.answer
                      , r = e.status
                      , a = e.answerId
                      , i = e.usedReferences;
                    r !== o.RewriteStatusRequest.LOADING && n !== l.AnswerType.GENERATE && n !== l.AnswerType.GENERATE_BY_HELPER || w(!0),
                    t && r === o.RewriteStatusRequest.SUCCESS && a && (I({
                        answer: t,
                        answerId: a,
                        usedReferences: i
                    }),
                    A(!1))
                },
                onError: function(e) {
                    A(!1),
                    w(!1),
                    O(e)
                }
            }),
            {
                error: v,
                toggleRefetching: function(e) {
                    A(e)
                },
                isLoading: S || (n === l.AnswerType.GENERATE || n === l.AnswerType.GENERATE_BY_HELPER) && P,
                postAnswer: k
            }
        }
    }
    ,
    805556: (e, t, n) => {
        var r, a;
        n.r(t),
        n.d(t, {
            AiAnswerCloseEvents: () => r,
            AnswerErrorReasons: () => a
        }),
        function(e) {
            e.CLOSE = "close",
            e.READ = "read",
            e.USER_CHANGE = "user_change",
            e.SOCKET_EXTERNAL = "socket-external",
            e.SOCKET_INCOMING = "socket-incoming"
        }(r || (r = {})),
        function(e) {
            e.EMPTY_ARTICLES = "Articles or answers not found"
        }(a || (a = {}))
    }
    ,
    355582: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => w
        });
        var r = n(827378)
          , a = n(55188)
          , o = n.n(a)
          , i = n(267651)
          , u = n.n(i)
          , s = n(292554)
          , c = n.n(s)
          , l = n(500034)
          , f = n(292562)
          , d = n(960190)
          , p = n(438089)
          , m = n(587776)
          , E = n(99854)
          , v = n(399206)
          , y = n(436132)
          , h = n(233678)
          , b = n(728822)
          , A = n(827378)
          , g = c().bind(b.default)
          , S = (0,
        r.forwardRef)((function(e, t) {
            var n = e.getText
              , a = e.onLoad
              , i = e.setText
              , s = e.setHelperHeight
              , c = e.onShow
              , b = (0,
            r.useRef)(null)
              , S = (0,
            h.default)()
              , w = S.suggestion
              , T = S.isShow
              , _ = S.hide
              , R = S.checker
              , C = S.clear;
            (0,
            r.useEffect)((function() {
                T && (s(y.BASE_HELPER_HEIGHT, !1),
                c())
            }
            ), [T]);
            var O = (0,
            r.useRef)(null)
              , I = (0,
            r.useRef)("")
              , N = (0,
            r.useRef)("")
              , k = function(e, t) {
                var n = t ? t.trim() : "";
                if (!t || N.current.trim() === n || (0,
                l.isFeatureAvailable)("ai_limited"))
                    return C(),
                    void _();
                I.current.trim() !== n && (R(t),
                N.current = "",
                I.current = "")
            }
              , x = function() {
                _()
            }
              , P = function(e, t) {
                var n = t.answer;
                I.current = n
            }
              , L = function() {
                var e, t = n();
                (null === (e = O.current) || void 0 === e ? void 0 : e.answerId) && (0,
                d.markRewriter)({
                    currentText: t,
                    rewriterAnswer: O.current
                })
            }
              , U = function(e, t) {
                N.current = t
            };
            (0,
            r.useEffect)((function() {
                var e = n()
                  , t = u().subscribe(y.FEED_COMPOSE_INPUT_CHANGE, k)
                  , r = u().subscribe(y.AI_REWRITER_USE_START, x)
                  , a = u().subscribe(y.AI_REWRITER_USE_END, P)
                  , o = u().subscribe(y.FEED_COMPOSE_SUBMIT, L)
                  , i = u().subscribe(y.AI_COMPOSE_ANSWER_PASTED, U);
                return e ? R(e) : _(),
                function() {
                    u().unsubscribe(t),
                    u().unsubscribe(o),
                    u().unsubscribe(r),
                    u().unsubscribe(a),
                    u().unsubscribe(i)
                }
            }
            ), []);
            var D = (0,
            v.default)({
                onMutate: function() {
                    a(!0)
                },
                onError: function() {
                    a(!1),
                    C()
                },
                onSuccess: function(e) {
                    var t = e.answer
                      , r = n();
                    O.current = e,
                    I.current = t,
                    a(!1),
                    i({
                        text: t
                    }),
                    C(),
                    u().publish(y.AI_REWRITER_USAGE, {
                        data: e,
                        originalText: r
                    })
                }
            })
              , M = D.postRewriterAnswer
              , H = D.error
              , F = (0,
            p.default)(E.default, {
                onCloseRequest: function() {
                    return !0
                },
                error: H
            })
              , B = F.modalElement
              , G = F.showModal;
            return (0,
            r.useEffect)((function() {
                H && G(),
                (null == H ? void 0 : H.code) === f.RewriterErrorCodes.PAYMENT_REQUIRED ? (0,
                l.updateFeature)("ai_limited", !0) : (0,
                l.updateFeature)("ai_limited", !1)
            }
            ), [H]),
            A.createElement(A.Fragment, null, H && B, A.createElement(m.default, {
                ref: function(e) {
                    b.current = e,
                    o().isFunction(t) ? t(e) : t && (t.current = e)
                },
                onClick: function() {
                    var e = n();
                    w.optionId && (_(),
                    M({
                        text: e,
                        id: w.optionId
                    }))
                },
                className: g({
                    active: T && n(),
                    button: !0
                })
            }, w.text))
        }
        ));
        S.displayName = "AiSuggestion";
        const w = S
    }
    ,
    233678: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => y
        });
        var r = n(827378)
          , a = n(55188)
          , o = n.n(a)
          , i = n(880774)
          , u = n(500034)
          , s = n(960190)
          , c = n(439590)
          , l = n(915634);
        function f(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function d(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function p(e) {
            return function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function i(e) {
                        d(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        d(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
        }
        function m(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return f(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? f(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function E(e, t) {
            var n, r, a, o, i = {
                label: 0,
                sent: function() {
                    if (1 & a[0])
                        throw a[1];
                    return a[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: u(0),
                throw: u(1),
                return: u(2)
            },
            "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }
            ),
            o;
            function u(o) {
                return function(u) {
                    return function(o) {
                        if (n)
                            throw new TypeError("Generator is already executing.");
                        for (; i; )
                            try {
                                if (n = 1,
                                r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                0) : r.next) && !(a = a.call(r, o[1])).done)
                                    return a;
                                switch (r = 0,
                                a && (o = [2 & o[0], a.value]),
                                o[0]) {
                                case 0:
                                case 1:
                                    a = o;
                                    break;
                                case 4:
                                    return i.label++,
                                    {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    i.label++,
                                    r = o[1],
                                    o = [0];
                                    continue;
                                case 7:
                                    o = i.ops.pop(),
                                    i.trys.pop();
                                    continue;
                                default:
                                    if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        i = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                        i.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && i.label < a[1]) {
                                        i.label = a[1],
                                        a = o;
                                        break
                                    }
                                    if (a && i.label < a[2]) {
                                        i.label = a[2],
                                        i.ops.push(o);
                                        break
                                    }
                                    a[2] && i.ops.pop(),
                                    i.trys.pop();
                                    continue
                                }
                                o = t.call(e, i)
                            } catch (e) {
                                o = [6, e],
                                r = 0
                            } finally {
                                n = a = 0
                            }
                        if (5 & o[0])
                            throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, u])
                }
            }
        }
        var v = /[^\w\s\u0400-\u04FF_]| $/;
        const y = function() {
            var e, t = m((0,
            r.useState)(!1), 2), n = t[0], a = t[1], f = m((0,
            r.useState)({
                optionId: null,
                text: ""
            }), 2), d = f[0], y = f[1], h = (0,
            r.useRef)({
                shorter: !1,
                tone: !1,
                profanity: !1,
                grammar: !1
            }), b = function(e) {
                return o().chain(h.current).omit(e).values().some().value()
            }, A = function() {
                a(!1)
            }, g = function(e) {
                y(e),
                a(!0)
            }, S = function() {
                h.current = {
                    shorter: !1,
                    tone: !1,
                    profanity: !1,
                    grammar: !1
                },
                A()
            }, w = (e = p((function(e) {
                var t, n, r, o, i;
                return E(this, (function(u) {
                    switch (u.label) {
                    case 0:
                        if (t = e.type,
                        n = e.request,
                        r = e.text,
                        o = e.suggestionOptions,
                        b(t))
                            return [2];
                        u.label = 1;
                    case 1:
                        return u.trys.push([1, 3, , 4]),
                        [4, n(r)];
                    case 2:
                        return i = u.sent(),
                        b(t) ? [2] : (h.current[t] = Boolean(i),
                        i ? g(o) : a(!1),
                        [3, 4]);
                    case 3:
                        return u.sent(),
                        h.current[t] = !1,
                        b(t) ? [2] : (a(!1),
                        [3, 4]);
                    case 4:
                        return [2]
                    }
                }
                ))
            }
            )),
            function(t) {
                return e.apply(this, arguments)
            }
            ), T = function() {
                var e = p((function(e) {
                    return E(this, (function(t) {
                        switch (t.label) {
                        case 0:
                            return [4, w({
                                type: l.SuggestionType.PPOFANITY,
                                text: e,
                                request: s.profanity,
                                suggestionOptions: {
                                    text: (0,
                                    i.i18n)("Make it professional"),
                                    optionId: c.OptionsRewriter.FORMAL
                                }
                            })];
                        case 1:
                            return t.sent(),
                            [2]
                        }
                    }
                    ))
                }
                ));
                return function(t) {
                    return e.apply(this, arguments)
                }
            }(), _ = function() {
                var e = p((function(e) {
                    return E(this, (function(t) {
                        switch (t.label) {
                        case 0:
                            return [4, w({
                                type: l.SuggestionType.GRAMMAR,
                                text: e,
                                request: s.grammar,
                                suggestionOptions: {
                                    text: (0,
                                    i.i18n)("Correct grammar & spelling"),
                                    optionId: c.OptionsRewriter.GRAMMAR
                                }
                            })];
                        case 1:
                            return t.sent(),
                            [2]
                        }
                    }
                    ))
                }
                ));
                return function(t) {
                    return e.apply(this, arguments)
                }
            }(), R = function() {
                var e = p((function(e) {
                    return E(this, (function(t) {
                        switch (t.label) {
                        case 0:
                            return e.length >= 1800 ? [2] : [4, w({
                                type: l.SuggestionType.TONE,
                                text: e,
                                request: s.tone,
                                suggestionOptions: {
                                    text: (0,
                                    i.i18n)("Make it friendly"),
                                    optionId: c.OptionsRewriter.FRIENDLY
                                }
                            })];
                        case 1:
                            return t.sent(),
                            [2]
                        }
                    }
                    ))
                }
                ));
                return function(t) {
                    return e.apply(this, arguments)
                }
            }(), C = o().debounce((function(e) {
                var t = e[e.length - 1];
                v.test(t) && (T(e),
                _(e),
                (0,
                u.isFeatureAvailable)("is_customization_for_global") && R(e))
            }
            ), 1e3);
            return {
                suggestion: d,
                isShow: n,
                hide: A,
                checker: function(e) {
                    var t;
                    e.length >= 1e4 ? S() : (t = e,
                    b(l.SuggestionType.SHORTER) || (t.length >= 2500 ? (h.current[l.SuggestionType.SHORTER] = !0,
                    g({
                        optionId: c.OptionsRewriter.SHORTER,
                        text: (0,
                        i.i18n)("Make it shorter")
                    })) : (h.current[l.SuggestionType.SHORTER] = !1,
                    a(!1))),
                    C(e))
                },
                clear: S
            }
        }
    }
    ,
    915634: (e, t, n) => {
        var r;
        n.r(t),
        n.d(t, {
            SuggestionType: () => r
        }),
        function(e) {
            e.SHORTER = "shorter",
            e.TONE = "tone",
            e.PPOFANITY = "profanity",
            e.GRAMMAR = "grammar"
        }(r || (r = {}))
    }
    ,
    30893: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => C
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(827378)
          , i = n.n(o)
          , u = n(292554)
          , s = n.n(u)
          , c = n(267651)
          , l = n.n(c)
          , f = n(880774)
          , d = n(769734)
          , p = n(292562)
          , m = n(195601)
          , E = n(436132)
          , v = n(587776)
          , y = n(805556)
          , h = n(378902)
          , b = n(604789)
          , A = n(661533);
        function g(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function S(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function w(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return g(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? g(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        var T = s().bind(b.default)
          , _ = {
            taskId: null,
            taskText: "",
            taskType: null,
            taskDeadline: null
        }
          , R = (0,
        o.forwardRef)((function(e, t) {
            var n, r, u = e.messageId, s = e.talkId, c = e.elementId, b = e.elementType, g = e.setHelperHeight, R = e.onTryToShow, C = e.onHide, O = e.onError, I = w((0,
            o.useState)(!1), 2), N = I[0], k = I[1], x = (0,
            o.useRef)(_), P = (0,
            o.useRef)({
                show: a().noop,
                hide: a().noop
            }), L = (0,
            h.default)({
                onSuccess: function(e) {
                    var t = e.taskId
                      , n = e.taskText
                      , r = e.taskType
                      , o = e.taskDeadline;
                    x.current = {
                        taskId: t,
                        taskText: n,
                        taskType: a().contains([p.TaskTypes.FOLLOW_UP, p.TaskTypes.MEET], r) ? r : p.TaskTypes.FOLLOW_UP,
                        taskDeadline: o
                    },
                    R({
                        helperType: E.AiHelperType.TASK,
                        cb: P.current.show,
                        isLoading: D
                    })
                },
                onError: function() {
                    x.current = _,
                    N && P.current.hide(),
                    O({
                        helperType: E.AiHelperType.TASK
                    })
                }
            }), U = L.postTask, D = L.isLoading, M = L.toggleRefetching, H = (n = function() {
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(e) {
                    switch (e.label) {
                    case 0:
                        return M(!1),
                        k(!1),
                        [4, C(E.AiHelperType.TASK)];
                    case 1:
                        return e.sent(),
                        N && g(E.NULL_HELPER_HEIGHT),
                        [2]
                    }
                }
                ))
            }
            ,
            r = function() {
                var e = this
                  , t = arguments;
                return new Promise((function(r, a) {
                    var o = n.apply(e, t);
                    function i(e) {
                        S(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        S(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
            ,
            function() {
                return r.apply(this, arguments)
            }
            );
            P.current = {
                show: function() {
                    g(E.BASE_HELPER_HEIGHT),
                    k(!0)
                },
                hide: H
            };
            var F = function(e, t) {
                if (t) {
                    var n = t.event
                      , r = t.talkId;
                    switch (n) {
                    case y.AiAnswerCloseEvents.CLOSE:
                    case y.AiAnswerCloseEvents.READ:
                        r === s && H();
                        break;
                    case y.AiAnswerCloseEvents.SOCKET_EXTERNAL:
                        break;
                    default:
                        H()
                    }
                }
            };
            (0,
            o.useEffect)((function() {
                U({
                    messageId: u,
                    talkId: s,
                    elementId: c,
                    elementType: b
                })
            }
            ), [u]),
            (0,
            o.useEffect)((function() {
                D && R({
                    helperType: E.AiHelperType.TASK,
                    cb: P.current.show,
                    isLoading: D
                })
            }
            ), [D]),
            (0,
            o.useEffect)((function() {
                var e = l().subscribe(E.AI_ANSWER_CLOSE, F);
                return function() {
                    l().unsubscribe(e)
                }
            }
            ), []);
            var B = "";
            if (!0 === D)
                B = i().createElement(m.default, null);
            else {
                var G = x.current
                  , j = G.taskDeadline
                  , q = G.taskText;
                B = "".concat((0,
                f.i18n)("Add task"), " ").concat(j ? (0,
                f.i18n)("for (time)") + " " + (0,
                d.getDateByTimestamp)({
                    timestamp: j
                }) : "", " ").concat(q ? " — " + q : "")
            }
            return i().createElement(v.default, {
                ref: t,
                className: "".concat(T("button", {
                    active: N,
                    disable: D
                }), " js-ai-task"),
                onClick: function() {
                    var e = x.current
                      , t = e.taskId
                      , n = e.taskDeadline
                      , r = e.taskType
                      , a = e.taskText;
                    P.current.hide();
                    var o = w(n ? (0,
                    d.getDateByTimestamp)({
                        timestamp: n
                    }).split(" ") : [null, null], 2)
                      , i = o[0]
                      , u = o[1];
                    A(document).trigger("notes:compose:switch", ["task", {
                        date: i,
                        time: u,
                        type: r,
                        body: a,
                        generalOptions: {
                            isFromAiHelpers: !0,
                            taskId: t,
                            shouldPreventAiHelpers: !0
                        }
                    }])
                },
                isClosable: !0,
                onCloseClick: function() {
                    H()
                }
            }, i().createElement("div", {
                className: T("preview", {
                    loading: D
                })
            }, B))
        }
        ));
        R.displayName = "AiTask";
        const C = R
    }
    ,
    378902: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => E
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(456552)
          , i = n(827378)
          , u = n(292562)
          , s = n(604874)
          , c = n(58256)
          , l = n(555424)
          , f = n(942407)
          , d = n(436132);
        function p(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function m(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return p(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? p(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        const E = function(e) {
            var t = e.onSuccess
              , n = void 0 === t ? a().noop : t
              , r = e.onError
              , p = void 0 === r ? a().noop : r
              , E = e.onMutate
              , v = void 0 === E ? a().noop : E
              , y = m((0,
            i.useState)(null), 2)
              , h = y[0]
              , b = y[1]
              , A = m((0,
            i.useState)(!1), 2)
              , g = A[0]
              , S = A[1]
              , w = m((0,
            i.useState)(!1), 2)
              , T = w[0]
              , _ = w[1]
              , R = (0,
            f.default)()
              , C = R.requestCount
              , O = R.incrementRequestCount
              , I = R.clearRequestCount
              , N = function(e) {
                var t = e.detail
                  , n = e.code;
                p(e),
                b({
                    detail: t,
                    code: n
                })
            }
              , k = function(e) {
                n(e),
                b(null),
                _(!1)
            }
              , x = (0,
            o.useMutation)({
                mutationFn: function(e) {
                    return v(),
                    (0,
                    c.default)(e)
                },
                onSuccess: function(e) {
                    var t = e.taskId
                      , n = e.taskText
                      , r = e.taskType
                      , a = e.taskDeadline
                      , o = e.status;
                    o === u.RewriteStatusRequest.LOADING && _(!0),
                    o !== u.RewriteStatusRequest.SUCCESS ? S(!0) : k({
                        taskId: t,
                        taskType: r,
                        taskText: n,
                        taskDeadline: a
                    })
                },
                onError: N
            })
              , P = x.mutate
              , L = x.data;
            return (0,
            o.useQuery)({
                queryKey: ["task", null == L ? void 0 : L.jobUuid],
                queryFn: function() {
                    return (0,
                    l.getTaskRequest)({
                        jobUuid: null == L ? void 0 : L.jobUuid,
                        maxRequestCount: 10,
                        url: s.TASK_URL,
                        incrementRequestCount: O,
                        clearRequestCount: I,
                        requestCount: C.current
                    })
                },
                enabled: g && Boolean(L),
                refetchInterval: d.REFETCH_ANSWER_INTERVAL,
                onSuccess: function(e) {
                    var t = e.taskId
                      , n = e.taskText
                      , r = e.taskType
                      , a = e.taskDeadline
                      , o = e.status;
                    o === u.RewriteStatusRequest.LOADING && _(!0),
                    o === u.RewriteStatusRequest.SUCCESS && n && (k({
                        taskId: t,
                        taskType: r,
                        taskText: n,
                        taskDeadline: a
                    }),
                    S(!1))
                },
                onError: function(e) {
                    S(!1),
                    _(!1),
                    N(e)
                }
            }),
            {
                error: h,
                toggleRefetching: function(e) {
                    S(e)
                },
                isLoading: T,
                postTask: P
            }
        }
    }
    ,
    4190: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => x
        });
        var r = n(827378)
          , a = n(292554)
          , o = n.n(a)
          , i = n(267651)
          , u = n.n(i)
          , s = n(55188)
          , c = n.n(s)
          , l = n(491967)
          , f = n(241811)
          , d = n(880774)
          , p = n(500034)
          , m = n(960190)
          , E = n(292562)
          , v = n(720923)
          , y = n(438089)
          , h = n(387725)
          , b = n(99854)
          , A = n(436132)
          , g = n(399206)
          , S = n(127169)
          , w = n(238332)
          , T = n(830221)
          , _ = n(967482)
          , R = n(758918)
          , C = n(827378);
        function O(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function I(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return O(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? O(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        var N = o().bind(R.default)
          , k = (0,
        p.isFeatureAvailable)(p.Features.IS_CUSTOMIZATION_FOR_GLOBAL);
        const x = (0,
        v.default)((function(e) {
            var t = e.offset
              , n = t.right
              , a = t.bottom
              , o = e.getText
              , i = e.setText
              , s = e.onLoad
              , v = (0,
            r.useRef)(null)
              , R = (0,
            r.useRef)(null)
              , O = (0,
            r.useRef)(null)
              , x = I((0,
            r.useState)(null), 2)
              , P = x[0]
              , L = x[1]
              , U = I((0,
            r.useState)(!1), 2)
              , D = U[0]
              , M = U[1]
              , H = I((0,
            r.useState)(!0), 2)
              , F = H[0]
              , B = H[1]
              , G = I((0,
            r.useState)(0), 2)
              , j = G[0]
              , q = G[1]
              , W = (0,
            r.useRef)([])
              , Y = (0,
            g.default)({
                onSuccess: function(e) {
                    var t = o()
                      , n = e.answer;
                    c().first(W.current) !== t && W.current.unshift(t),
                    s(!1),
                    R.current = e,
                    u().publish(A.AI_REWRITER_USE_END, {
                        answer: n
                    }),
                    i(n)
                },
                onError: function(e) {
                    var t = e.isInternalError;
                    s(!1),
                    t && (M(!0),
                    W.current.length && q((function(e) {
                        return ++e
                    }
                    )))
                },
                onMutate: function() {
                    s(!0)
                }
            })
              , z = Y.postRewriterAnswer
              , K = Y.error
              , V = Y.hideError
              , Q = function(e) {
                var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
                n.length > 3e3 ? B(!1) : B(!0),
                V(),
                O.current && O.current !== n && (null === (t = R.current) || void 0 === t ? void 0 : t.answer) !== n && (W.current = [],
                O.current = null),
                M(!1)
            }
              , $ = function(e, t) {
                var n = t.data
                  , r = t.originalText;
                W.current.unshift(r),
                R.current = n
            }
              , Z = function() {
                var e;
                if (null === (e = R.current) || void 0 === e ? void 0 : e.answerId) {
                    var t = o();
                    (0,
                    m.markRewriter)({
                        currentText: t,
                        rewriterAnswer: R.current
                    })
                }
            }
              , X = (0,
            y.default)(b.default, {
                onCloseRequest: function() {
                    return V(),
                    !0
                },
                error: K
            })
              , J = X.modalElement
              , ee = X.showModal;
            (0,
            r.useEffect)((function() {
                var e = u().subscribe(A.FEED_COMPOSE_INPUT_CHANGE, Q)
                  , t = u().subscribe(A.FEED_COMPOSE_SUBMIT, Z)
                  , n = u().subscribe(A.AI_REWRITER_USAGE, $);
                return function() {
                    u().unsubscribe(e),
                    u().unsubscribe(t),
                    u().unsubscribe(n)
                }
            }
            ), []),
            (0,
            r.useEffect)((function() {
                K && (K.code === E.RewriterErrorCodes.PAYMENT_REQUIRED ? (ee(),
                (0,
                p.updateFeature)("ai_limited", !0)) : (0,
                p.updateFeature)("ai_limited", !1))
            }
            ), [K]);
            var te = function() {
                var e = W.current.shift() || "";
                q((function(e) {
                    return --e
                }
                )),
                O.current = e,
                u().publish(A.AI_COMPOSE_ANSWER_PASTED, e),
                i(e),
                M(!1)
            };
            return C.createElement("div", {
                onMouseEnter: function() {
                    M(!0),
                    v.current && clearTimeout(v.current)
                },
                onMouseLeave: function() {
                    v.current = setTimeout((function() {
                        M(!1)
                    }
                    ), 250)
                },
                className: N("control", {
                    active: D
                })
            }, C.createElement(h.default, {
                dataSrc: _.default
            }), J, C.createElement(l.default, {
                type: "svg",
                className: N("sticker"),
                name: "ai_rewrite--ai"
            }), C.createElement("div", {
                className: N("wrapper", {
                    opened: D
                }),
                style: {
                    bottom: a,
                    right: n
                },
                onMouseEnter: function() {
                    M(!0),
                    v.current && clearTimeout(v.current)
                }
            }, K && K.code !== E.RewriterErrorCodes.PAYMENT_REQUIRED ? C.createElement(T.default, {
                onUndoClick: te,
                onTryClick: function() {
                    var e = o();
                    P && (z({
                        text: e,
                        id: P
                    }),
                    M(!1))
                },
                isUndoAvailable: Boolean(j),
                error: K
            }) : C.createElement(C.Fragment, null, C.createElement("div", {
                className: N("header")
            }, C.createElement("div", {
                className: N("brand")
            }, (0,
            d.i18n)("{{brand_name.ai}}")), k && C.createElement(S.default, null)), C.createElement(w.default, {
                shouldLongerOptionsShow: F,
                onOptionClick: function(e) {
                    if (1 != !(0,
                    p.isFeatureAvailable)(p.Features.AIREWRITER)) {
                        var t = o();
                        L(e),
                        z({
                            text: t,
                            id: e
                        }),
                        u().publish(A.AI_REWRITER_USE_START, {}),
                        M(!1)
                    } else
                        u().publish(f.default, !0)
                },
                isUndoOptionVisible: Boolean(W.current.length),
                onUndoOptionClick: te
            }))))
        }
        ))
    }
    ,
    830221: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => v
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(827378)
          , i = n.n(o)
          , u = n(292554)
          , s = n.n(u)
          , c = n(352467)
          , l = n(671837)
          , f = n(880774)
          , d = n(292562)
          , p = n(275814)
          , m = s().bind(p.default)
          , E = [d.RewriterErrorCodes.PAYMENT_REQUIRED, d.RewriterErrorCodes.VALIDATION_ERROR];
        const v = function(e) {
            var t = e.onTryClick
              , n = e.error
              , r = e.onUndoClick
              , o = e.isUndoAvailable
              , u = n.detail
              , s = n.code
              , d = !a().include(E, s);
            return i().createElement("div", {
                className: m("wrapper")
            }, i().createElement("p", {
                className: m("text")
            }, u), d && i().createElement("p", null, i().createElement(l.default, {
                theme: c.LinkPrimaryTheme,
                className: "button",
                onClick: function() {
                    t()
                }
            }, (0,
            f.i18n)("Try again"))), o && i().createElement(l.default, {
                theme: c.LinkPrimaryTheme,
                className: "button",
                onClick: r
            }, (0,
            f.i18n)("Undo changes")))
        }
    }
    ,
    238332: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => E
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(55188)
          , i = n.n(o)
          , u = n(292554)
          , s = n.n(u)
          , c = n(724329)
          , l = n(491967)
          , f = n(880774)
          , d = n(439590)
          , p = n(84290)
          , m = s().bind(p.default);
        const E = function(e) {
            var t = e.onOptionClick
              , n = e.onUndoOptionClick
              , r = e.isUndoOptionVisible
              , o = e.shouldLongerOptionsShow
              , u = (0,
            c.useConst)((function() {
                return [{
                    id: d.OptionsRewriter.GRAMMAR,
                    option: (0,
                    f.i18n)("Correct grammar & spelling"),
                    icon: "grammar-check"
                }, {
                    id: d.OptionsRewriter.FORMAL,
                    option: (0,
                    f.i18n)("Make it professional"),
                    icon: "formal"
                }, {
                    id: d.OptionsRewriter.FRIENDLY,
                    option: (0,
                    f.i18n)("Make it friendly"),
                    icon: "friendly"
                }, {
                    id: d.OptionsRewriter.HUMOROUS,
                    option: (0,
                    f.i18n)("Make it witty"),
                    icon: "humorous"
                }, {
                    id: d.OptionsRewriter.LONGER,
                    option: (0,
                    f.i18n)("Make it longer"),
                    icon: "longer"
                }, {
                    id: d.OptionsRewriter.SHORTER,
                    option: (0,
                    f.i18n)("Make it shorter"),
                    icon: "shorter"
                }, {
                    id: d.OptionsRewriter.SIMPLIFY,
                    option: (0,
                    f.i18n)("Make it simpler"),
                    icon: "simplify"
                }]
            }
            ));
            return a().createElement("div", {
                className: m("select")
            }, i().map(u, (function(e) {
                var n = e.icon
                  , r = e.id
                  , i = e.option;
                if (o || r !== d.OptionsRewriter.LONGER)
                    return a().createElement("div", {
                        className: m("option"),
                        onClick: function() {
                            t(r)
                        },
                        key: r
                    }, a().createElement("div", {
                        className: m("option-icon")
                    }, a().createElement(l.default, {
                        type: "svg",
                        className: m("icon"),
                        name: "ai_rewrite--".concat(n)
                    })), a().createElement("div", null, i))
            }
            )), r && a().createElement("div", {
                className: m("option", "option-revert"),
                onClick: function() {
                    n()
                }
            }, a().createElement("div", {
                className: m("option-icon")
            }, a().createElement(l.default, {
                type: "svg",
                className: m("icon"),
                name: "ai_rewrite--back"
            })), a().createElement("div", null, (0,
            f.i18n)("Undo changes"))))
        }
    }
    ,
    585402: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => S
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(588039)
          , s = n(534139)
          , c = n(916569)
          , l = n(529062)
          , f = n(701106)
          , d = n(880774)
          , p = n(369409)
          , m = n(613092)
          , E = n(970948)
          , v = n(447399)
          , y = n(248813)
          , h = i().bind(y.default)
          , b = (0,
        p.getCDNPath)("/frontend/images/interface/ai_onboarding/")
          , A = APP.lang_id.toUpperCase()
          , g = {
            "1x": "".concat(b, "survey-success_").concat(A, ".png"),
            "2x": "".concat(b, "survey-success_").concat(A, "@2x.png")
        };
        const S = function(e) {
            var t = e.onSuccess
              , n = (0,
            m.useSteps)().changeStep
              , r = (0,
            u.useFormContext)().control;
            return a().createElement(E.default, {
                images: g
            }, a().createElement("div", {
                className: h("wrapper")
            }, a().createElement(f.default, {
                className: h("title"),
                type: "h2",
                size: "xxl"
            }, (0,
            d.i18n)("Thanks for your input")), a().createElement(c.Text, {
                theme: c.TextPrimaryTheme,
                className: h("text"),
                size: "l"
            }, (0,
            d.i18n)("Feel free to provide any additional feedback or suggestions.")), a().createElement(u.Controller, {
                control: r,
                name: "fields.comment",
                render: function(e) {
                    var t = e.field
                      , n = t.onChange
                      , r = t.value;
                    return a().createElement(s.TextArea, {
                        theme: s.TextareaDarkTheme,
                        className: h("mb-16"),
                        value: r,
                        onChange: function(e) {
                            n(e.target.value)
                        },
                        placeholder: (0,
                        d.i18n)("What did you think of Kommo AI?")
                    })
                }
            }), a().createElement(l.Button, {
                theme: l.ButtonPrimaryTheme,
                onClick: function() {
                    t(),
                    n(v.AiTrialExpiredSurveyFlowSteps.SUCCESS_STEP)
                }
            }, (0,
            d.i18n)("Finish"))))
        }
    }
    ,
    331416: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => C
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(55188)
          , s = n.n(u)
          , c = n(588039)
          , l = n(916569)
          , f = n(529062)
          , d = n(596004)
          , p = n(724329)
          , m = n(701106)
          , E = n(880774)
          , v = n(369409)
          , y = n(613092)
          , h = n(417438)
          , b = n(970948)
          , A = n(447399)
          , g = n(450518);
        function S(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var w = i().bind(g.default)
          , T = (0,
        v.getCDNPath)("/frontend/images/interface/ai_onboarding/")
          , _ = APP.lang_id.toUpperCase()
          , R = {
            "1x": "".concat(T, "survey_").concat(_, ".png"),
            "2x": "".concat(T, "survey_").concat(_, "@2x.png")
        };
        const C = function() {
            var e = (0,
            y.useSteps)().changeStep
              , t = (0,
            p.useConst)((function() {
                return [{
                    id: (0,
                    E.i18n)("Don't need AI"),
                    value: (0,
                    E.i18n)("Don't need AI")
                }, {
                    id: (0,
                    E.i18n)("Poor AI output"),
                    value: (0,
                    E.i18n)("Poor AI output")
                }, {
                    id: (0,
                    E.i18n)("Don’t need other Enterprise features"),
                    value: (0,
                    E.i18n)("Don’t need other Enterprise features")
                }, {
                    id: (0,
                    E.i18n)("Too expensive"),
                    value: (0,
                    E.i18n)("Too expensive")
                }, {
                    id: (0,
                    E.i18n)("Not enough features"),
                    value: (0,
                    E.i18n)("Not enough features")
                }]
            }
            ))
              , n = (0,
            c.useFormContext)()
              , r = n.control
              , o = n.formState.isDirty;
            return a().createElement(b.default, {
                images: R
            }, a().createElement("div", {
                className: w("wrapper")
            }, a().createElement(m.default, {
                className: w("title"),
                type: "h2",
                size: "xxl"
            }, (0,
            E.i18n)("Why didn't it work for you?")), a().createElement(l.Text, {
                theme: l.TextPrimaryTheme,
                className: w("text"),
                size: "l"
            }, (0,
            E.i18n)("Select one or more reasons:")), a().createElement(c.Controller, {
                control: r,
                name: "fields.reasons",
                render: function(e) {
                    var n = e.field
                      , r = n.onChange
                      , o = n.value;
                    return a().createElement(h.ChoosableOptions, {
                        options: t,
                        chosenOptions: o,
                        onChoose: function(e) {
                            var t, n = function(e) {
                                if (Array.isArray(e))
                                    return S(e)
                            }(t = o) || function(e) {
                                if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                                    return Array.from(e)
                            }(t) || function(e, t) {
                                if (e) {
                                    if ("string" == typeof e)
                                        return S(e, t);
                                    var n = Object.prototype.toString.call(e).slice(8, -1);
                                    return "Object" === n && e.constructor && (n = e.constructor.name),
                                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? S(e, t) : void 0
                                }
                            }(t) || function() {
                                throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                            }();
                            s().contains(o, e) ? n = s().without(o, e) : n.push(e),
                            r(n)
                        },
                        className: w("options")
                    })
                }
            }), a().createElement(c.Controller, {
                control: r,
                name: "fields.other",
                render: function(e) {
                    var t = e.field
                      , n = t.onChange
                      , r = t.value;
                    return a().createElement(d.Input, {
                        theme: d.InputLightTheme,
                        className: w("input"),
                        value: r,
                        onChange: function(e) {
                            n(e.target.value)
                        },
                        placeholder: (0,
                        E.i18n)("Other (please specify)")
                    })
                }
            }), a().createElement(f.Button, {
                theme: f.ButtonPrimaryTheme,
                onClick: function() {
                    e(A.AiTrialExpiredSurveyFlowSteps.FINISH_STEP)
                },
                isDisabled: !o
            }, (0,
            E.i18n)("Submit"))))
        }
    }
    ,
    711660: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => u
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(417438)
          , i = n(970948);
        const u = function(e) {
            var t = e.onCloseRequest
              , n = (0,
            o.useInvalidateSurveyRequest)().invalidateSurveyRequest;
            return (0,
            r.useEffect)((function() {
                setTimeout((function() {
                    t(),
                    n()
                }
                ), 3e3)
            }
            ), []),
            a().createElement(i.default, null, a().createElement(o.Success, null))
        }
    }
    ,
    205636: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => A
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(916569)
          , s = n(529062)
          , c = n(701106)
          , l = n(880774)
          , f = n(369409)
          , d = n(613092)
          , p = n(970948)
          , m = n(447399)
          , E = n(881323)
          , v = i().bind(E.default)
          , y = (0,
        f.getCDNPath)("/frontend/images/interface/ai_onboarding/")
          , h = APP.lang_id.toUpperCase()
          , b = {
            "1x": "".concat(y, "kommo-ai_").concat(h, ".png"),
            "2x": "".concat(y, "kommo-ai_").concat(h, "@2x.png")
        };
        const A = function(e) {
            var t = e.onSuccess
              , n = (0,
            d.useSteps)().changeStep;
            return a().createElement(p.default, {
                images: b
            }, a().createElement("div", {
                className: v("wrapper")
            }, a().createElement("div", null, a().createElement(c.default, {
                className: v("title"),
                type: "h2",
                size: "xxl"
            }, (0,
            l.i18n)("Your Kommo AI trial has ended (Survey)")), a().createElement(u.Text, {
                theme: u.TextPrimaryTheme,
                className: v("text"),
                size: "l"
            }, (0,
            l.i18n)("To continue using Kommo AI, upgrade to our Enterprise plan."))), a().createElement("div", null, a().createElement(s.Button, {
                theme: s.ButtonNeutralTheme,
                onClick: function() {
                    t(m.AiTrialExpiredSurveyFlowSteps.TRIAL_ENDED),
                    APP.router.navigate("settings/pay", {
                        trigger: !0
                    })
                }
            }, (0,
            l.i18n)("Upgrade now (Survey)")), a().createElement(s.Button, {
                theme: s.ButtonNeutralTheme,
                onClick: function() {
                    n(m.AiTrialExpiredSurveyFlowSteps.REASON_OPTIONS)
                }
            }, (0,
            l.i18n)("I'm not interested")))))
        }
    }
    ,
    846505: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => d
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(827378)
          , i = n.n(o)
          , u = n(588039)
          , s = n(613092)
          , c = n(845174)
          , l = n(583089)
          , f = n(447399);
        const d = (0,
        s.withStepsProvider)((function(e) {
            var t = e.onClose
              , n = void 0 === t ? a().noop : t
              , r = e.onSuccess
              , o = (0,
            l.default)()
              , s = o.formMethods
              , f = o.getValidData;
            return i().createElement(u.FormProvider, s, i().createElement(c.default, {
                onCloseRequest: function() {
                    n()
                },
                onSuccess: function(e) {
                    var t = f(e);
                    r(t)
                }
            }))
        }
        ), f.AiTrialExpiredSurveyFlowSteps.TRIAL_ENDED)
    }
    ,
    447399: (e, t, n) => {
        var r;
        n.r(t),
        n.d(t, {
            AiTrialExpiredSurveyFlowSteps: () => r
        }),
        function(e) {
            e.TRIAL_ENDED = "trial-ended",
            e.REASON_OPTIONS = "reason-options",
            e.FINISH_STEP = "finish-step",
            e.SUCCESS_STEP = "success-step"
        }(r || (r = {}))
    }
    ,
    845174: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => f
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(613092)
          , i = n(447399)
          , u = n(205636)
          , s = n(331416)
          , c = n(585402)
          , l = n(711660);
        const f = function(e) {
            var t = e.onCloseRequest
              , n = e.onSuccess;
            switch ((0,
            o.useSteps)().activeStep) {
            case i.AiTrialExpiredSurveyFlowSteps.TRIAL_ENDED:
                return a().createElement(u.default, {
                    onSuccess: n
                });
            case i.AiTrialExpiredSurveyFlowSteps.REASON_OPTIONS:
                return a().createElement(s.default, null);
            case i.AiTrialExpiredSurveyFlowSteps.FINISH_STEP:
                return a().createElement(c.default, {
                    onSuccess: n
                });
            case i.AiTrialExpiredSurveyFlowSteps.SUCCESS_STEP:
                return a().createElement(l.default, {
                    onCloseRequest: t
                })
            }
        }
    }
    ,
    486037: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => d
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(438089)
          , s = n(246541)
          , c = n(846505)
          , l = n(945948)
          , f = i().bind(l.default);
        const d = function(e) {
            var t = e.onCloseRequest
              , n = e.onSuccess
              , o = function() {
                t()
            }
              , i = (0,
            u.default)((function() {
                return a().createElement(s.GlobalUnifiedModal, {
                    onClose: o,
                    size: "s",
                    customPosition: {
                        right: "40px",
                        bottom: "40px"
                    },
                    isPopup: !0,
                    isCloseButtonVisible: !1,
                    slideDirection: "right",
                    className: f("modal"),
                    hideDistance: 600
                }, a().createElement(c.default, {
                    onSuccess: n
                }))
            }
            ))
              , l = i.modalElement
              , d = i.showModal;
            return (0,
            r.useEffect)((function() {
                d()
            }
            ), []),
            l
        }
    }
    ,
    436132: (e, t, n) => {
        n.r(t),
        n.d(t, {
            ACTIVATE_AGENT_URL_HASH: () => R,
            AI_ANSWER_CLOSE: () => v,
            AI_ANSWER_GENERATE_RESPONSE: () => y,
            AI_ANSWER_MESSAGE_ADD: () => m,
            AI_COMPOSE_ANSWER_PASTED: () => E,
            AI_HELPER_RESIZE: () => b,
            AI_REWRITER_USAGE: () => f,
            AI_REWRITER_USE_END: () => p,
            AI_REWRITER_USE_START: () => d,
            AI_TASK_PASTE_CLICK: () => h,
            AiHelperType: () => r,
            AnswerType: () => a,
            BASE_BOTTOM_HELPERS_OFFSET: () => g,
            BASE_HELPER_HEIGHT: () => o,
            FEED_COMPOSE_INPUT_CHANGE: () => c,
            FEED_COMPOSE_SUBMIT: () => l,
            MAX_OPENED_ANSWER_HEIGHT: () => A,
            NULL_HELPER_HEIGHT: () => i,
            REFETCH_ANSWER_INTERVAL: () => w,
            REFETCH_INTERVAL: () => S,
            REWRITER_ONBOARDING_CLOSED: () => C,
            SHOW_FIRST_SOURCE_MODAL_URL_HASH: () => T,
            SHOW_HIDE_ANIMATION_DURATION_MS: () => u,
            SHOW_SOURCES_MODAL_URL_HASH: () => _,
            TEMPLATE_LINK_TO_DOWNLOAD: () => s
        });
        var r, a, o = "36px", i = "0px", u = 400, s = "/example/ai_knowledge_base/QA_Template".concat(APP.lang_id.toUpperCase(), ".docx"), c = "feed:compose:input-change", l = "feed:compose:submit", f = "rewriter:usage", d = "rewriter:use:start", p = "rewriter:use:end", m = "answer:message:add", E = "answer:compose:pasted", v = "answer:close", y = "answer:generate:response", h = "task:paste:click", b = "helper:resize", A = 305, g = 10, S = 2e3, w = 1e3, T = "#show_ai_first_source_modal", _ = "#show_ai_sources_modal", R = "#activate_agent", C = "rewriter_onboarding_closed";
        !function(e) {
            e.ANSWER = "answer",
            e.TASK = "task",
            e.SUGGESTION = "suggestion"
        }(r || (r = {})),
        function(e) {
            e.DEFAULT = "default",
            e.GENERATE = "generate",
            e.GENERATE_BY_HELPER = "generateByHelper"
        }(a || (a = {}))
    }
    ,
    583089: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => f
        });
        var r = n(161320)
          , a = n.n(r)
          , o = n(827378)
          , i = n(588039)
          , u = n(417438)
          , s = n(447399);
        function c() {
            return c = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            c.apply(this, arguments)
        }
        var l = {
            reasons: [],
            other: "",
            comment: ""
        };
        const f = function() {
            var e = (0,
            o.useRef)(a()())
              , t = c({}, function(e) {
                if (null == e)
                    throw new TypeError("Cannot destructure " + e);
                return e
            }((0,
            i.useForm)({
                defaultValues: {
                    fields: l
                }
            })))
              , n = t.getValues;
            return {
                isDirty: t.formState.isDirty,
                control: t.control,
                formMethods: t,
                getValidData: function(t) {
                    var r;
                    if (t === s.AiTrialExpiredSurveyFlowSteps.TRIAL_ENDED)
                        r = {
                            movedToBilling: !0
                        };
                    else {
                        var o = n().fields
                          , i = o.reasons
                          , c = o.other
                          , l = o.comment;
                        c && i.push(c),
                        r = {
                            reasons: i,
                            text: l
                        }
                    }
                    var f = a()().diff(e.current, "seconds");
                    return {
                        name: u.Surveys.KOMMO_AI_TRIAL,
                        data: r,
                        metadata: {
                            viewingTime: f,
                            viewingUrl: window.location.pathname
                        }
                    }
                }
            }
        }
    }
    ,
    942407: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => a
        });
        var r = n(827378);
        const a = function() {
            var e = (0,
            r.useRef)(0);
            return {
                requestCount: e,
                incrementRequestCount: function() {
                    e.current += 1
                },
                clearRequestCount: function() {
                    e.current = 0
                }
            }
        }
    }
    ,
    399206: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => m
        });
        var r = n(456552)
          , a = n(827378)
          , o = n(880774)
          , i = n(237262)
          , u = n(960190)
          , s = n(292562)
          , c = n(889378)
          , l = n(436132)
          , f = n(942407);
        function d(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function p(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return d(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? d(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        const m = function(e) {
            var t = e.onSuccess
              , n = e.onError
              , d = e.onMutate
              , m = p((0,
            a.useState)(null), 2)
              , E = m[0]
              , v = m[1]
              , y = p((0,
            a.useState)(!1), 2)
              , h = y[0]
              , b = y[1]
              , A = (0,
            f.default)()
              , g = A.requestCount
              , S = A.incrementRequestCount
              , w = A.clearRequestCount
              , T = function(e) {
                var t = e.detail
                  , r = e.code
                  , a = e.show_modal;
                if (n({
                    isInternalError: !a,
                    detail: t
                }),
                a) {
                    var u = (0,
                    i.isAdmin)() ? "".concat(t, ' <a href="/settings/ai">').concat((0,
                    o.i18n)("Go to settings (AI)"), "</a>") : t;
                    (new c.default).showError(u, !1)
                } else
                    v({
                        detail: t,
                        code: r
                    })
            }
              , _ = function(e) {
                t(e),
                v(null)
            }
              , R = (0,
            r.useMutation)({
                mutationFn: function(e) {
                    return d(),
                    (0,
                    u.postRewriterRequest)(e)
                },
                onSuccess: function(e) {
                    var t = e.answer
                      , n = e.status
                      , r = e.answerId;
                    t && n === s.RewriteStatusRequest.SUCCESS && r ? _({
                        answer: t,
                        answerId: r
                    }) : b(!0)
                },
                onError: T
            })
              , C = R.mutate
              , O = R.data;
            return (0,
            r.useQuery)({
                queryKey: ["rewriter", null == O ? void 0 : O.jobUuid],
                queryFn: function() {
                    return (0,
                    u.getRewriterRequest)({
                        jobUuid: null == O ? void 0 : O.jobUuid,
                        maxRequestCount: 5,
                        url: u.REWRITER_URL,
                        incrementRequestCount: S,
                        clearRequestCount: w,
                        requestCount: g.current
                    })
                },
                enabled: h,
                refetchInterval: l.REFETCH_INTERVAL,
                onSuccess: function(e) {
                    var t = e.answer
                      , n = e.status
                      , r = e.answerId;
                    t && n === s.RewriteStatusRequest.SUCCESS && r && (_({
                        answer: t,
                        answerId: r
                    }),
                    b(!1))
                },
                onError: function(e) {
                    b(!1),
                    T(e)
                }
            }),
            {
                error: E,
                postRewriterAnswer: C,
                hideError: function() {
                    v(null)
                }
            }
        }
    }
    ,
    353256: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AI_ANSWER_CLOSE: () => s.AI_ANSWER_CLOSE,
            AI_ANSWER_GENERATE_RESPONSE: () => s.AI_ANSWER_GENERATE_RESPONSE,
            AI_ANSWER_MESSAGE_ADD: () => s.AI_ANSWER_MESSAGE_ADD,
            AI_HELPER_RESIZE: () => s.AI_HELPER_RESIZE,
            AiAgentActivationPopup: () => u.default,
            AiAgentCardControl: () => o.default,
            AiAnswerCloseEvents: () => l.AiAnswerCloseEvents,
            AiHelpers: () => r.default,
            AiRewriter: () => a.default,
            AiTrialExpiredSurveyPopup: () => i.default,
            BASE_HELPER_HEIGHT: () => s.BASE_HELPER_HEIGHT,
            FEED_COMPOSE_INPUT_CHANGE: () => s.FEED_COMPOSE_INPUT_CHANGE,
            FEED_COMPOSE_SUBMIT: () => s.FEED_COMPOSE_SUBMIT,
            OptionsRewriter: () => c.OptionsRewriter,
            REWRITER_ONBOARDING_CLOSED: () => s.REWRITER_ONBOARDING_CLOSED
        });
        var r = n(524176)
          , a = n(4190)
          , o = n(559261)
          , i = n(486037)
          , u = n(201029)
          , s = n(436132)
          , c = n(439590)
          , l = n(805556)
    }
    ,
    439590: (e, t, n) => {
        var r;
        n.r(t),
        n.d(t, {
            OptionsRewriter: () => r
        }),
        function(e) {
            e[e.FORMAL = 1] = "FORMAL",
            e[e.FRIENDLY = 2] = "FRIENDLY",
            e[e.HUMOROUS = 3] = "HUMOROUS",
            e[e.LONGER = 4] = "LONGER",
            e[e.SHORTER = 5] = "SHORTER",
            e[e.GRAMMAR = 6] = "GRAMMAR",
            e[e.SIMPLIFY = 7] = "SIMPLIFY"
        }(r || (r = {}))
    }
    ,
    587776: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => m
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(55188)
          , s = n.n(u)
          , c = n(706898)
          , l = n(740098)
          , f = n(294238)
          , d = i().bind(f.default)
          , p = (0,
        r.forwardRef)((function(e, t) {
            var n = e.onClick
              , r = e.onCloseClick
              , o = void 0 === r ? s().noop : r
              , i = e.className
              , u = void 0 === i ? "" : i
              , f = e.children
              , p = e.isClosable
              , m = void 0 !== p && p;
            return a().createElement("div", {
                onClick: function(e) {
                    n(e)
                },
                className: "".concat(d("button"), " ").concat(u),
                ref: t
            }, a().createElement(c.default, {
                className: d("icon")
            }), f, m && a().createElement("div", {
                className: d("close"),
                onClick: function(e) {
                    e.stopPropagation(),
                    o()
                }
            }, a().createElement(l.default, null)))
        }
        ));
        p.displayName = "AiHelperButton";
        const m = p
    }
    ,
    195601: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => u
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(880774)
          , i = n(797154);
        const u = function() {
            return a().createElement(a().Fragment, null, a().createElement("div", null, (0,
            o.i18n)("Working on it")), a().createElement(i.AnimatedDots, null))
        }
    }
    ,
    127169: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => c
        });
        var r = n(292554)
          , a = n.n(r)
          , o = n(880774)
          , i = n(993930)
          , u = n(827378)
          , s = a().bind(i.default);
        const c = function(e) {
            var t = e.className;
            return u.createElement("div", {
                className: "".concat(s("container"), " ").concat(t)
            }, u.createElement("div", {
                className: s("title")
            }, (0,
            o.i18n)("Beta")))
        }
    }
    ,
    740098: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => u
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(827378)
          , i = n.n(o);
        const u = function(e) {
            var t = e.onClick
              , n = void 0 === t ? a().noop : t
              , r = e.className
              , o = void 0 === r ? "" : r;
            return i().createElement("svg", {
                onClick: n,
                className: o,
                width: "16",
                height: "16",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg"
            }, i().createElement("path", {
                d: "m4 4.5 4 4m4 4-4-4m0 0 4-4m-4 4-4 4",
                stroke: "#6B6D72"
            }))
        }
    }
    ,
    706898: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => o
        });
        var r = n(827378)
          , a = n.n(r);
        const o = function(e) {
            var t = e.className
              , n = void 0 === t ? "" : t;
            return a().createElement("svg", {
                width: "16",
                height: "17",
                className: n,
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg"
            }, a().createElement("path", {
                d: "M7.713 6.004c.054-.227.52-.227.574 0 .265 1.11.729 2.525 1.452 3.104.656.525 1.77.879 2.695 1.098.229.055.229.533 0 .588-.925.219-2.039.573-2.695 1.098-.723.579-1.187 1.993-1.452 3.104-.054.227-.52.227-.574 0-.265-1.11-.729-2.525-1.452-3.104-.656-.525-1.77-.879-2.695-1.098-.229-.055-.229-.533 0-.588.925-.219 2.039-.573 2.695-1.098.723-.579 1.187-1.993 1.452-3.104ZM3.16 2.993c.073-.223.607-.223.68 0 .159.485.38.96.675 1.195.237.19.578.342.932.46.223.075.223.629 0 .704-.354.118-.695.27-.932.46-.295.236-.516.71-.675 1.195-.073.223-.607.223-.68 0-.159-.485-.38-.96-.675-1.195-.237-.19-.578-.342-.932-.46-.223-.075-.223-.629 0-.704.354-.118.695-.27.932-.46.295-.236.516-.71.675-1.195ZM11.677 1.997c.067-.225.58-.225.646 0 .185.623.457 1.272.837 1.575.32.256.804.452 1.282.595.225.068.225.598 0 .666-.478.143-.962.339-1.282.595-.38.303-.652.952-.837 1.575-.067.225-.58.225-.646 0-.185-.623-.457-1.272-.837-1.575-.32-.256-.804-.452-1.282-.595-.225-.068-.225-.598 0-.666.478-.143.962-.339 1.282-.595.38-.303.652-.952.837-1.575Z",
                fill: "#797CF8"
            }))
        }
    }
    ,
    499492: (e, t, n) => {
        n.r(t),
        n.d(t, {
            checkIsPaymentRequired: () => a
        });
        var r = n(500034)
          , a = function() {
            switch (!0) {
            case (0,
            r.isFeatureAvailable)("kommo_ai_trial_started") && !(0,
            r.isFeatureAvailable)("kommo_ai_trial_ended"):
                return !1;
            case !(0,
            r.isFeatureAvailable)("airewriter") || (0,
            r.isFeatureAvailable)("kommo_ai_trial_possible") && !(0,
            r.isFeatureAvailable)("kommo_ai_trial_started"):
                return !0;
            default:
                return !1
            }
        }
    }
    ,
    32003: (e, t, n) => {
        n.r(t),
        n.d(t, {
            getUpdatedAnswerType: () => o
        });
        var r = n(500034)
          , a = n(436132)
          , o = function(e) {
            return !0 === (e === a.AnswerType.DEFAULT && (0,
            r.isFeatureAvailable)("ai_rewriter_answer_by_button")) ? a.AnswerType.GENERATE_BY_HELPER : e
        }
    }
    ,
    117464: (e, t, n) => {
        n.r(t),
        n.d(t, {
            checkIsPaymentRequired: () => a.checkIsPaymentRequired,
            getUpdatedAnswerType: () => r.getUpdatedAnswerType,
            replaceNewlinesWithBreaks: () => o.replaceNewlinesWithBreaks
        });
        var r = n(32003)
          , a = n(499492)
          , o = n(17840)
    }
    ,
    17840: (e, t, n) => {
        n.r(t),
        n.d(t, {
            replaceNewlinesWithBreaks: () => u
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(55188)
          , i = n.n(o)
          , u = function(e) {
            return i().map(e.split("\n"), (function(e, t) {
                return a().createElement(a().Fragment, {
                    key: t
                }, e, a().createElement("br", null))
            }
            ))
        }
    }
    ,
    19050: (e, t, n) => {
        var r;
        n.r(t),
        n.d(t, {
            default: () => a
        }),
        function(e) {
            e[e.contacts = 1] = "contacts",
            e[e.leads = 2] = "leads",
            e[e.companies = 3] = "companies",
            e[e.todo = 4] = "todo",
            e[e.notes = 5] = "notes",
            e[e.tags = 7] = "tags",
            e[e.catalogs = 10] = "catalogs",
            e[e.catalog_elements = 11] = "catalog_elements",
            e[e.customers = 12] = "customers",
            e[e.transactions = 13] = "transactions",
            e[e.unsorted = 14] = "unsorted",
            e[e.mail = 16] = "mail",
            e[e.contacts_and_companies = 17] = "contacts_and_companies",
            e[e.amoforms = 19] = "amoforms",
            e[e.events = 23] = "events",
            e[e.talk = 24] = "talk",
            e[e.files = 25] = "files"
        }(r || (r = {}));
        const a = r
    }
    ,
    241811: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => r
        });
        const r = "kommo:ai:trial:expired:modal:show"
    }
    ,
    604733: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AiUsageSurvey: () => r.AiUsageSurvey
        });
        var r = n(44295)
    }
    ,
    788953: (e, t, n) => {
        n.r(t),
        n.d(t, {
            useAiUsageSurvey: () => r.useAiUsageSurvey
        });
        var r = n(628073)
    }
    ,
    628073: (e, t, n) => {
        n.r(t),
        n.d(t, {
            useAiUsageSurvey: () => p
        });
        var r = n(161320)
          , a = n.n(r)
          , o = n(827378)
          , i = n(588039)
          , u = n(643095)
          , s = n(320526)
          , c = n(417438);
        function l(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function f() {
            return f = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            f.apply(this, arguments)
        }
        var d = {
            aiUsageFeedback: ""
        }
          , p = function() {
            var e, t, n = (0,
            o.useRef)(a()()), r = (e = function(e) {
                var t;
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(n) {
                    switch (n.label) {
                    case 0:
                        return n.trys.push([0, 2, , 3]),
                        [4, (0,
                        s.saveSurveyResult)(e)];
                    case 1:
                        return n.sent(),
                        [3, 3];
                    case 2:
                        return t = n.sent(),
                        (0,
                        u.captureException)(t),
                        [3, 3];
                    case 3:
                        return [2]
                    }
                }
                ))
            }
            ,
            t = function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function i(e) {
                        l(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        l(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
            ,
            function(e) {
                return t.apply(this, arguments)
            }
            ), p = f({}, function(e) {
                if (null == e)
                    throw new TypeError("Cannot destructure " + e);
                return e
            }((0,
            i.useForm)({
                defaultValues: {
                    fields: d
                },
                mode: "onChange"
            }))), m = p.getValues;
            return {
                control: p.control,
                formMethods: p,
                getValidData: function() {
                    var e = m().fields.aiUsageFeedback.replace(/\n/g, " ")
                      , t = a()().diff(n.current, "seconds");
                    return {
                        data: {
                            aiUsageFeedback: e
                        },
                        name: c.Surveys.AI_USAGE_FEEDBACK,
                        metadata: {
                            viewingTime: t,
                            viewingUrl: window.location.pathname
                        }
                    }
                },
                saveSurvey: r
            }
        }
    }
    ,
    657764: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AiUsageSurvey: () => u
        });
        var r = n(588039)
          , a = n(788953)
          , o = n(218865)
          , i = n(827378)
          , u = function(e) {
            var t = e.onCloseRequest
              , n = e.onSubmit
              , u = e.isLoading
              , s = (0,
            a.useAiUsageSurvey)()
              , c = s.formMethods
              , l = s.getValidData
              , f = s.saveSurvey;
            return i.createElement(r.FormProvider, c, i.createElement(o.Feedback, {
                onSubmit: function() {
                    var e = l();
                    f(e),
                    n()
                },
                onCloseRequest: function() {
                    t()
                },
                isLoading: u
            }))
        }
    }
    ,
    169580: (e, t, n) => {
        n.r(t),
        n.d(t, {
            Feedback: () => v
        });
        var r = n(588039)
          , a = n(529062)
          , o = n(916569)
          , i = n(701106)
          , u = n(369409)
          , s = n(880774)
          , c = n(225526)
          , l = n(417438)
          , f = n(112167)
          , d = n(659918)
          , p = n(827378)
          , m = (0,
        u.getCDNPath)("/frontend/images/interface/ai/")
          , E = {
            "1x": "".concat(m, "ai_usage_survey.png"),
            "2x": "".concat(m, "ai_usage_survey@2x.png")
        }
          , v = function(e) {
            var t = e.onSubmit
              , n = e.onCloseRequest
              , u = e.isLoading
              , m = (0,
            r.useFormContext)()
              , v = m.control
              , y = m.formState
              , h = y.isValid
              , b = y.isDirty;
            return p.createElement(l.BaseStep, {
                images: E,
                className: d.default.wrapper
            }, p.createElement("div", {
                className: d.default.content
            }, p.createElement(i.default, {
                type: "h2",
                size: "xxl",
                className: d.default.title
            }, (0,
            s.i18n)("Share feedback to reset AI limits")), p.createElement(c.CloseModalButton, {
                onClick: function() {
                    n()
                },
                className: d.default.closeButton
            }), p.createElement(o.Text, {
                size: "l",
                theme: o.TextPrimaryTheme,
                className: d.default.text
            }, (0,
            s.i18n)("To request a limit reset, please provide feedback on your experience with Kommo AI:")), p.createElement(r.Controller, {
                control: v,
                name: "fields.aiUsageFeedback",
                rules: {
                    validate: function(e) {
                        return function(e, t, n) {
                            var r = e.trim();
                            return !(r.length < 1 || r.length > 1e3)
                        }(e)
                    }
                },
                render: function(e) {
                    var t = e.field
                      , n = t.onChange
                      , r = t.value
                      , a = e.fieldState.invalid;
                    return p.createElement(f.SurveyTextArea, {
                        value: r,
                        isInvalid: a,
                        onChange: function(e) {
                            n(e.target.value)
                        },
                        maxLength: 1e3
                    })
                }
            }), p.createElement(a.Button, {
                theme: a.ButtonPrimaryTheme,
                isDisabled: !h || !b || u,
                isLoading: u,
                onClick: function() {
                    t()
                },
                className: d.default.button
            }, (0,
            s.i18n)("Submit"))))
        }
    }
    ,
    218865: (e, t, n) => {
        n.r(t),
        n.d(t, {
            Feedback: () => r.Feedback
        });
        var r = n(169580)
    }
    ,
    19607: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AI_USAGE_FEEDBACK_TEXTAREA_THEME: () => u
        });
        var r = n(534139);
        function a(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        var o, i, u = (o = function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = null != arguments[t] ? arguments[t] : {}
                  , r = Object.keys(n);
                "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter((function(e) {
                    return Object.getOwnPropertyDescriptor(n, e).enumerable
                }
                )))),
                r.forEach((function(t) {
                    a(e, t, n[t])
                }
                ))
            }
            return e
        }({}, r.TextareaLightTheme),
        i = null != (i = {
            "--crm-ui-kit-textarea-width": "412px",
            "--crm-ui-kit-textarea-min-height": "60px",
            "--crm-ui-kit-textarea-border-width": "0",
            "--crm-ui-kit-textarea-padding-top": "0",
            "--crm-ui-kit-textarea-padding-bottom": "0",
            "--crm-ui-kit-textarea-padding-horizontal": "0"
        }) ? i : {},
        Object.getOwnPropertyDescriptors ? Object.defineProperties(o, Object.getOwnPropertyDescriptors(i)) : function(e, t) {
            var n = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                n.push.apply(n, r)
            }
            return n
        }(Object(i)).forEach((function(e) {
            Object.defineProperty(o, e, Object.getOwnPropertyDescriptor(i, e))
        }
        )),
        o)
    }
    ,
    112167: (e, t, n) => {
        n.r(t),
        n.d(t, {
            SurveyTextArea: () => d
        });
        var r = n(60042)
          , a = n.n(r)
          , o = n(916569)
          , i = n(534139)
          , u = n(880774)
          , s = n(19607)
          , c = n(989715)
          , l = n(827378);
        function f(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        var d = function(e) {
            var t = e.value
              , n = e.isInvalid
              , r = e.onChange
              , d = e.maxLength
              , p = t.trim()
              , m = p.length > d;
            return l.createElement("div", null, l.createElement("div", {
                className: a()(c.default.textAreaWrapper, f({}, c.default.textAreaWrapperError, n))
            }, l.createElement(i.TextArea, {
                placeholder: (0,
                u.i18n)("What features do you like and why? What could be improved?"),
                className: c.default.textArea,
                value: t,
                onChange: function(e) {
                    r(e)
                },
                isPlaceholderVisibleOnFocus: !0,
                theme: s.AI_USAGE_FEEDBACK_TEXTAREA_THEME
            }), l.createElement(o.Text, {
                size: "ms",
                theme: n ? o.TextErrorTheme : o.TextSecondaryLightTheme,
                className: c.default.counter
            }, p.length, "/", d)), n && l.createElement(o.Text, {
                size: "ms",
                theme: o.TextErrorTheme
            }, m ? (0,
            u.sprintf)((0,
            u.i18n)("Please enter no more than %s characters."), d) : (0,
            u.i18n)("Please enter at least 1 character.")))
        }
    }
    ,
    44295: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AiUsageSurvey: () => r.AiUsageSurvey
        });
        var r = n(657764)
    }
    ,
    635365: (e, t, n) => {
        n.r(t),
        n.d(t, {
            useModalProvider: () => r.default
        });
        var r = n(617861)
    }
    ,
    766842: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => l
        });
        var r = n(292554)
          , a = n.n(r)
          , o = n(827378)
          , i = n.n(o)
          , u = n(730860)
          , s = n(642455)
          , c = a().bind(s.default);
        const l = function(e) {
            var t = e.onClick
              , n = e.className
              , r = void 0 === n ? "" : n;
            return i().createElement("div", {
                className: "".concat(c("overlay"), " ").concat(r),
                onClick: t
            }, i().createElement(u.Spinner, {
                isCentered: !0,
                theme: u.SpinnerPrimaryTheme
            }))
        }
    }
    ,
    393914: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => f
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(267651)
          , i = n.n(o)
          , u = n(766842);
        function s(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function c(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        function l(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return s(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? s(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        const f = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
              , t = e.isShownByDefault
              , n = void 0 !== t && t
              , o = l((0,
            r.useState)(n), 2)
              , s = o[0]
              , f = o[1]
              , d = l((0,
            r.useState)(!1), 2)
              , p = d[0]
              , m = d[1]
              , E = l((0,
            r.useState)(!1), 2)
              , v = E[0]
              , y = E[1]
              , h = function() {
                f(!1),
                m(!1),
                v && (i().publish("overlay:unfix", !0),
                y(!1))
            }
              , b = function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = null != arguments[t] ? arguments[t] : {}
                      , r = Object.keys(n);
                    "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter((function(e) {
                        return Object.getOwnPropertyDescriptor(n, e).enumerable
                    }
                    )))),
                    r.forEach((function(t) {
                        c(e, t, n[t])
                    }
                    ))
                }
                return e
            }({
                onClick: function() {
                    p && h()
                },
                isFixed: v
            }, e)
              , A = s ? a().createElement(u.default, b) : null;
            return {
                showOverlay: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                      , t = e.isClosable
                      , n = void 0 !== t && t
                      , r = e.isFixed
                      , a = void 0 !== r && r;
                    n && m(n),
                    a && (i().publish("overlay:fix", !0),
                    y(a)),
                    f(!0)
                },
                hideOverlay: h,
                overlayElement: A
            }
        }
    }
    ,
    321561: (e, t, n) => {
        n.r(t),
        n.d(t, {
            default: () => c
        });
        var r = n(55188)
          , a = n.n(r)
          , o = n(827378);
        function i(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function u(e) {
            return function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function u(e) {
                        i(o, r, a, u, s, "next", e)
                    }
                    function s(e) {
                        i(o, r, a, u, s, "throw", e)
                    }
                    u(void 0)
                }
                ))
            }
        }
        function s(e, t) {
            var n, r, a, o, i = {
                label: 0,
                sent: function() {
                    if (1 & a[0])
                        throw a[1];
                    return a[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: u(0),
                throw: u(1),
                return: u(2)
            },
            "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }
            ),
            o;
            function u(o) {
                return function(u) {
                    return function(o) {
                        if (n)
                            throw new TypeError("Generator is already executing.");
                        for (; i; )
                            try {
                                if (n = 1,
                                r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                0) : r.next) && !(a = a.call(r, o[1])).done)
                                    return a;
                                switch (r = 0,
                                a && (o = [2 & o[0], a.value]),
                                o[0]) {
                                case 0:
                                case 1:
                                    a = o;
                                    break;
                                case 4:
                                    return i.label++,
                                    {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    i.label++,
                                    r = o[1],
                                    o = [0];
                                    continue;
                                case 7:
                                    o = i.ops.pop(),
                                    i.trys.pop();
                                    continue;
                                default:
                                    if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        i = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                        i.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && i.label < a[1]) {
                                        i.label = a[1],
                                        a = o;
                                        break
                                    }
                                    if (a && i.label < a[2]) {
                                        i.label = a[2],
                                        i.ops.push(o);
                                        break
                                    }
                                    a[2] && i.ops.pop(),
                                    i.trys.pop();
                                    continue
                                }
                                o = t.call(e, i)
                            } catch (e) {
                                o = [6, e],
                                r = 0
                            } finally {
                                n = a = 0
                            }
                        if (5 & o[0])
                            throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, u])
                }
            }
        }
        const c = function(e) {
            var t = e.acceptText
              , n = e.declineText
              , r = e.title
              , i = e.description
              , c = e.onAccept
              , l = e.onDecline
              , f = void 0 === l ? a().noop : l
              , d = e.onConfirmModalClose
              , p = void 0 === d ? a().noop : d
              , m = e.shouldPreventPageChange
              , E = e.shouldRouteWhenAccept
              , v = void 0 === E || E
              , y = e.isAcceptButtonGray
              , h = e.isNoCancel
              , b = void 0 !== h && h
              , A = (0,
            o.useRef)()
              , g = {
                onAccept: c,
                onDecline: f,
                onConfirmModalClose: p
            }
              , S = (0,
            o.useRef)(g);
            S.current = g;
            var w = (0,
            o.useMemo)((function() {
                return {
                    title: r,
                    description: i,
                    accept_text: t,
                    decline_text: n,
                    gray_button: y,
                    no_cancel: b,
                    accept: (e = u((function(e) {
                        return s(this, (function(t) {
                            switch (t.label) {
                            case 0:
                                return t.trys.push([0, 2, , 3]),
                                [4, S.current.onAccept()];
                            case 1:
                                return t.sent(),
                                !v && A.current ? [2] : (e(A.current),
                                [3, 3]);
                            case 2:
                                return t.sent(),
                                [3, 3];
                            case 3:
                                return [2]
                            }
                        }
                        ))
                    }
                    )),
                    function(t) {
                        return e.apply(this, arguments)
                    }
                    ),
                    decline: function() {
                        var e = u((function(e) {
                            return s(this, (function(t) {
                                switch (t.label) {
                                case 0:
                                    return t.trys.push([0, 2, , 3]),
                                    [4, S.current.onDecline()];
                                case 1:
                                    return t.sent(),
                                    e(A.current),
                                    [3, 3];
                                case 2:
                                    return t.sent(),
                                    [3, 3];
                                case 3:
                                    return [2]
                                }
                            }
                            ))
                        }
                        ));
                        return function(t) {
                            return e.apply(this, arguments)
                        }
                    }(),
                    destroy: function() {
                        S.current.onConfirmModalClose()
                    }
                };
                var e
            }
            ), [r, i, t, n, y])
              , T = function() {
                A.current = void 0
            };
            return (0,
            o.useEffect)((function() {
                var e = A.current;
                if (m) {
                    if (!e) {
                        var t = a().uniqueId("page_preventer_");
                        A.current = t,
                        APP.router.registerPreventConfig(w, t),
                        APP.router.preventPageChange(!0, t)
                    }
                } else
                    e && (APP.router.removePreventConfig(e),
                    T());
                return function() {
                    var e = A.current;
                    e && (APP.router.removePreventConfig(e),
                    T())
                }
            }
            ), [w, m]),
            {
                openConfirmModal: function(e) {
                    APP.router.confirmPageChange(w, (function() {
                        e && e()
                    }
                    ))
                }
            }
        }
    }
    ,
    954480: (e, t, n) => {
        n.r(t),
        n.d(t, {
            useSupportChatMessage: () => r.useSupportChatMessage
        });
        var r = n(69773)
    }
    ,
    69773: (e, t, n) => {
        n.r(t),
        n.d(t, {
            useSupportChatMessage: () => p
        });
        var r = n(827378)
          , a = n(128508)
          , o = n(55188)
          , i = n.n(o)
          , u = n(189967)
          , s = n(275649)
          , c = n(987280);
        function l(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function f(e, t, n, r, a, o, i) {
            try {
                var u = e[o](i)
                  , s = u.value
            } catch (e) {
                return void n(e)
            }
            u.done ? t(s) : Promise.resolve(s).then(r, a)
        }
        function d(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (null != n) {
                    var r, a, o = [], i = !0, u = !1;
                    try {
                        for (n = n.call(e); !(i = (r = n.next()).done) && (o.push(r.value),
                        !t || o.length !== t); i = !0)
                            ;
                    } catch (e) {
                        u = !0,
                        a = e
                    } finally {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw a
                        }
                    }
                    return o
                }
            }(e, t) || function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return l(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? l(e, t) : void 0
                }
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        var p = function() {
            var e, t, n = d((0,
            r.useState)(""), 2), o = n[0], l = n[1], p = d((0,
            r.useState)(!0), 2), m = p[0], E = p[1], v = (e = function(e, t) {
                var n, r, a, s, l, f, d, p, m, E, v, y;
                return function(e, t) {
                    var n, r, a, o, i = {
                        label: 0,
                        sent: function() {
                            if (1 & a[0])
                                throw a[1];
                            return a[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return o = {
                        next: u(0),
                        throw: u(1),
                        return: u(2)
                    },
                    "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                        return this
                    }
                    ),
                    o;
                    function u(o) {
                        return function(u) {
                            return function(o) {
                                if (n)
                                    throw new TypeError("Generator is already executing.");
                                for (; i; )
                                    try {
                                        if (n = 1,
                                        r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r),
                                        0) : r.next) && !(a = a.call(r, o[1])).done)
                                            return a;
                                        switch (r = 0,
                                        a && (o = [2 & o[0], a.value]),
                                        o[0]) {
                                        case 0:
                                        case 1:
                                            a = o;
                                            break;
                                        case 4:
                                            return i.label++,
                                            {
                                                value: o[1],
                                                done: !1
                                            };
                                        case 5:
                                            i.label++,
                                            r = o[1],
                                            o = [0];
                                            continue;
                                        case 7:
                                            o = i.ops.pop(),
                                            i.trys.pop();
                                            continue;
                                        default:
                                            if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                                i = 0;
                                                continue
                                            }
                                            if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) {
                                                i.label = o[1];
                                                break
                                            }
                                            if (6 === o[0] && i.label < a[1]) {
                                                i.label = a[1],
                                                a = o;
                                                break
                                            }
                                            if (a && i.label < a[2]) {
                                                i.label = a[2],
                                                i.ops.push(o);
                                                break
                                            }
                                            a[2] && i.ops.pop(),
                                            i.trys.pop();
                                            continue
                                        }
                                        o = t.call(e, i)
                                    } catch (e) {
                                        o = [6, e],
                                        r = 0
                                    } finally {
                                        n = a = 0
                                    }
                                if (5 & o[0])
                                    throw o[1];
                                return {
                                    value: o[0] ? o[1] : void 0,
                                    done: !0
                                }
                            }([o, u])
                        }
                    }
                }(this, (function(h) {
                    switch (h.label) {
                    case 0:
                        return r = (n = t || {}).onSuccess,
                        a = void 0 === r ? i().noop : r,
                        s = n.onError,
                        l = void 0 === s ? i().noop : s,
                        f = n.isNeedToSendMessage,
                        d = void 0 === f || f,
                        p = n.isNeedToSendBaseInfoWithMessage,
                        m = e,
                        void 0 !== p && p && (E = APP.constant("user").id,
                        v = APP.constant("account").id,
                        y = APP.constant("user").login,
                        m = "".concat(e, "\nClient ID: ").concat(v, "\nUser ID: ").concat(E, "\nEmail: ").concat(y)),
                        d ? [4, (0,
                        c.sendMessage)({
                            chat_id: o,
                            message: m
                        }).subscribe({
                            next: function(e) {
                                a(e)
                            },
                            error: function(e) {
                                l(e)
                            }
                        })] : [3, 2];
                    case 1:
                        h.sent(),
                        h.label = 2;
                    case 2:
                        return (0,
                        u.openSupportChat)(),
                        [2]
                    }
                }
                ))
            }
            ,
            t = function() {
                var t = this
                  , n = arguments;
                return new Promise((function(r, a) {
                    var o = e.apply(t, n);
                    function i(e) {
                        f(o, r, a, i, u, "next", e)
                    }
                    function u(e) {
                        f(o, r, a, i, u, "throw", e)
                    }
                    i(void 0)
                }
                ))
            }
            ,
            function(e, n) {
                return t.apply(this, arguments)
            }
            );
            return (0,
            r.useEffect)((function() {
                (0,
                c.connectBot)((0,
                s.getSupportBotId)()).pipe(a.map((function(e) {
                    return e.response.chats.bots
                }
                ))).subscribe((function(e) {
                    l(e.id),
                    E(!1)
                }
                ))
            }
            ), []),
            {
                sendMessageAndGoToSupportChat: v,
                isLoading: m
            }
        }
    }
    ,
    826434: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AnimatedDots: () => c
        });
        var r = n(827378)
          , a = n.n(r)
          , o = n(292554)
          , i = n.n(o)
          , u = n(849791)
          , s = i().bind(u.default)
          , c = function(e) {
            var t = e.className
              , n = void 0 === t ? "" : t;
            return a().createElement("svg", {
                className: "".concat(s("icon"), " ").concat(n),
                width: "132px",
                height: "58px",
                viewBox: "0 0 132 58",
                version: "1.1",
                xmlns: "http://www.w3.org/2000/svg"
            }, a().createElement("g", {
                stroke: "none",
                fill: "none",
                fillRule: "evenodd"
            }, a().createElement("g", {
                fill: "currentColor"
            }, a().createElement("circle", {
                className: s("dot1"),
                cx: "25",
                cy: "30",
                r: "13"
            }), a().createElement("circle", {
                className: s("dot2"),
                cx: "65",
                cy: "30",
                r: "13"
            }), a().createElement("circle", {
                className: s("dot3"),
                cx: "105",
                cy: "30",
                r: "13"
            }))))
        }
    }
    ,
    797154: (e, t, n) => {
        n.r(t),
        n.d(t, {
            AnimatedDots: () => r.AnimatedDots
        });
        var r = n(826434)
    }
    ,
    715507: (e, t, n) => {
        n.r(t),
        n.d(t, {
            CloseModalButton: () => l
        });
        var r = n(60042)
          , a = n.n(r)
          , o = n(529062)
          , i = n(491967)
          , u = n(798409)
          , s = n(827378);
        function c(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        var l = function(e) {
            var t = e.className
              , n = void 0 === t ? "" : t
              , r = e.onClick
              , l = function(e, t) {
                if (null == e)
                    return {};
                var n, r, a = function(e, t) {
                    if (null == e)
                        return {};
                    var n, r, a = {}, o = Object.keys(e);
                    for (r = 0; r < o.length; r++)
                        n = o[r],
                        t.indexOf(n) >= 0 || (a[n] = e[n]);
                    return a
                }(e, t);
                if (Object.getOwnPropertySymbols) {
                    var o = Object.getOwnPropertySymbols(e);
                    for (r = 0; r < o.length; r++)
                        n = o[r],
                        t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (a[n] = e[n])
                }
                return a
            }(e, ["className", "onClick"]);
            return s.createElement(o.Button, function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = null != arguments[t] ? arguments[t] : {}
                      , r = Object.keys(n);
                    "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter((function(e) {
                        return Object.getOwnPropertyDescriptor(n, e).enumerable
                    }
                    )))),
                    r.forEach((function(t) {
                        c(e, t, n[t])
                    }
                    ))
                }
                return e
            }({
                theme: o.ButtonSecondaryTheme,
                className: a()(u.default.closeButton, n),
                onClick: r
            }, l), s.createElement(i.default, {
                type: "svg",
                name: "common--close-not-painted"
            }))
        }
    }
    ,
    225526: (e, t, n) => {
        n.r(t),
        n.d(t, {
            CloseModalButton: () => r.CloseModalButton
        });
        var r = n(715507)
    }
    ,
    286340: (e, t, n) => {
        n.r(t),
        n.d(t, {
            getEntityLangInCustomers: () => o
        });
        var r = n(55188)
          , a = n.n(r)
          , o = function(e) {
            if (APP.isCard()) {
                var t = a().find(APP.constant("account").cf, (function(t) {
                    return t.ELEMENT_TYPES[0] === APP.element_types[e] && "Language" === t.NAME
                }
                ));
                if (t && APP.data.current_card) {
                    var n, r = APP.data.current_card.model.get("CFV[".concat(t.ID, "]"));
                    if (r)
                        return null === (n = t.ENUMS[r]) || void 0 === n ? void 0 : n.VALUE.toString().toLowerCase()
                }
            }
            return APP.lang_id
        }
    }
    ,
    769734: (e, t, n) => {
        n.r(t),
        n.d(t, {
            getDateByTimestamp: () => o
        });
        var r = n(161320)
          , a = n.n(r)
          , o = function(e) {
            var t = e.timestamp
              , n = e.format
              , r = void 0 === n ? "".concat(APP.system.format.date.date, " ").concat(APP.system.format.date.time) : n
              , o = e.isUtc;
            return (void 0 === o || o ? a().unix(t).utc() : a().unix(t)).format(r)
        }
    }
    ,
    197634: (e, t, n) => {
        n.r(t),
        n.d(t, {
            isEmptyString: () => r
        });
        var r = function(e) {
            return !Boolean(e.trim().length)
        }
    }
}]);
var _global = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
_global.SENTRY_RELEASE = {
    id: "build_2025_07_01_16_55_40_release"
},
function() {
    try {
        var e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}
          , t = (new Error).stack;
        t && (e._sentryDebugIds = e._sentryDebugIds || {},
        e._sentryDebugIds[t] = "052c7ea5-732e-4a62-9e66-81cb240732ae",
        e._sentryDebugIdIdentifier = "sentry-dbid-052c7ea5-732e-4a62-9e66-81cb240732ae")
    } catch (e) {}
}();
//# sourceMappingURL=33006.d631572a14bf50205de9.js.map
